<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <title>市盈率择时交易系统-Clone</title>
        <meta name="keywords" content="joinquant,聚宽,量化,宽客,quant,量化交易,量化平台,量化投资,量化策略,程序化交易,量化交易平台,python,金融工程,level2,level1">
        <meta name="description" content="聚宽（JoinQuant）量化交易平台是为量化爱好者（宽客）量身打造的云平台，我们为您提供精准的回测功能、高速实盘交易接口、易用的API文档、由易入难的策略库，便于您快速实现、使用自己的量化交易策略。">
        <meta name="viewport" content="width=device-width, initial-scale=1,minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	            <link type="text/css" href="{{ url_for('static', filename='css/lib.css') }}" rel="stylesheet">
        <link type="text/css" href="{{ url_for('static', filename='css/common.css') }}" rel="stylesheet">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/jq-common.css') }}">
        	    <link rel="icon" href="https://cdn.joinquant.com/common/img/favicon-16-16.png?v=2" type="image/x-icon">

<link href="{{ url_for('static', filename='css/jquery-ui-jq.css') }}" rel="stylesheet">
<link href="{{ url_for('static', filename='css/algorithm.css') }}" rel="stylesheet">
<style>
.introjs-helperNumberLayer{-webkit-box-sizing:initial;-moz-box-sizing:initial;box-sizing:initial;}
.ace_print-margin{ visibility: hidden !important; }
.modal_left{
	width:20%;
	text-align: right;
	letter-spacing: 1px;
}
.modal_cen{
	padding:0 10px;
}

#myModal>.modal-dialog{
	width:800px;

}
code{
	color:#000;
	font-weight: bold;
}
.modal-body li{
	margin-bottom: 3px;
}
.modal-title#myModalLabel{
	font-weight: bold;
}
#output-pane .dailybars-output .dailybars-controls .control-group .controls .datepicker{
	width:78px;
}
.subnav .state-triangle.border{
	right:213px;
}
.subnav .state-triangle{
	right:215px;
}
button.ace_replacebtn{
	color:#222;
	padding:4px;
}
.btn-link:focus, .btn-link:hover{
	text-decoration: none;
}
</style>

<style>
    .kk_body{
        padding-bottom:0px;
    }
</style>

                                                        <style>
        span.new{
        background: rgba(0,0,0,0);
    }
    .side-bar .top .name.user-alias img{
        width:16px;
        height:16px;
        float: none;
        margin-right:0;
    }
    .kk_footer .wp20.last img{
        position: relative;
        top:-2px;
    }
    .kk_footer .wp20.last .item>a{
        position: relative;
        left:-5px;
    }
    </style>
    <style id="ace_editor.css">.ace_editor {position: relative;overflow: hidden;direction: ltr;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: '';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}
/*# sourceURL=ace/css/ace_editor.css */</style><style id="ace-tm">.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}
/*# sourceURL=ace/css/ace-tm */</style><style>    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }</style><style>.ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}</style><style>.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_editor.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_editor.ace_autocomplete .ace_scroller {   background: none;   border: none;   box-shadow: none;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_editor.ace_autocomplete {    width: 550px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}</style><style id="ace_searchbox">.ace_search {background-color: #ddd;border: 1px solid #cbcbcb;border-top: 0 none;max-width: 325px;overflow: hidden;margin: 0;padding: 4px;padding-right: 6px;padding-bottom: 0;position: absolute;top: 0px;z-index: 99;white-space: normal;}.ace_search.left {border-left: 0 none;border-radius: 0px 0px 5px 0px;left: 0;}.ace_search.right {border-radius: 0px 0px 0px 5px;border-right: 0 none;right: 0;}.ace_search_form, .ace_replace_form {border-radius: 3px;border: 1px solid #cbcbcb;float: left;margin-bottom: 4px;overflow: hidden;}.ace_search_form.ace_nomatch {outline: 1px solid red;}.ace_search_field {background-color: white;border-right: 1px solid #cbcbcb;border: 0 none;-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;float: left;height: 22px;outline: 0;padding: 0 7px;width: 214px;margin: 0;}.ace_searchbtn,.ace_replacebtn {background: #fff;border: 0 none;border-left: 1px solid #dcdcdc;cursor: pointer;float: left;height: 22px;margin: 0;padding: 0;position: relative;}.ace_searchbtn:last-child,.ace_replacebtn:last-child {border-top-right-radius: 3px;border-bottom-right-radius: 3px;}.ace_searchbtn:disabled {background: none;cursor: default;}.ace_searchbtn {background-position: 50% 50%;background-repeat: no-repeat;width: 27px;}.ace_searchbtn.prev {background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADFJREFUeNpiSU1NZUAC/6E0I0yACYskCpsJiySKIiY0SUZk40FyTEgCjGgKwTRAgAEAQJUIPCE+qfkAAAAASUVORK5CYII=);    }.ace_searchbtn.next {background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADRJREFUeNpiTE1NZQCC/0DMyIAKwGJMUAYDEo3M/s+EpvM/mkKwCQxYjIeLMaELoLMBAgwAU7UJObTKsvAAAAAASUVORK5CYII=);    }.ace_searchbtn_close {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;border-radius: 50%;border: 0 none;color: #656565;cursor: pointer;float: right;font: 16px/16px Arial;height: 14px;margin: 5px 1px 9px 5px;padding: 0;text-align: center;width: 14px;}.ace_searchbtn_close:hover {background-color: #656565;background-position: 50% 100%;color: white;}.ace_replacebtn.prev {width: 54px}.ace_replacebtn.next {width: 27px}.ace_button {margin-left: 2px;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;overflow: hidden;opacity: 0.7;border: 1px solid rgba(100,100,100,0.23);padding: 1px;-moz-box-sizing: border-box;box-sizing:    border-box;color: black;}.ace_button:hover {background-color: #eee;opacity:1;}.ace_button:active {background-color: #ddd;}.ace_button.checked {border-color: #3399ff;opacity:1;}.ace_search_options{margin-bottom: 3px;text-align: right;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;}
/*# sourceURL=ace/css/ace_searchbox */</style><style id="ace-twilight">.ace-twilight .ace_gutter {background: #232323;color: #E2E2E2}.ace-twilight .ace_print-margin {width: 1px;background: #232323}.ace-twilight {background-color: #141414;color: #F8F8F8}.ace-twilight .ace_cursor {color: #A7A7A7}.ace-twilight .ace_marker-layer .ace_selection {background: rgba(221, 240, 255, 0.20)}.ace-twilight.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #141414;}.ace-twilight .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-twilight .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgba(255, 255, 255, 0.25)}.ace-twilight .ace_marker-layer .ace_active-line {background: rgba(255, 255, 255, 0.031)}.ace-twilight .ace_gutter-active-line {background-color: rgba(255, 255, 255, 0.031)}.ace-twilight .ace_marker-layer .ace_selected-word {border: 1px solid rgba(221, 240, 255, 0.20)}.ace-twilight .ace_invisible {color: rgba(255, 255, 255, 0.25)}.ace-twilight .ace_keyword,.ace-twilight .ace_meta {color: #CDA869}.ace-twilight .ace_constant,.ace-twilight .ace_constant.ace_character,.ace-twilight .ace_constant.ace_character.ace_escape,.ace-twilight .ace_constant.ace_other,.ace-twilight .ace_heading,.ace-twilight .ace_markup.ace_heading,.ace-twilight .ace_support.ace_constant {color: #CF6A4C}.ace-twilight .ace_invalid.ace_illegal {color: #F8F8F8;background-color: rgba(86, 45, 86, 0.75)}.ace-twilight .ace_invalid.ace_deprecated {text-decoration: underline;font-style: italic;color: #D2A8A1}.ace-twilight .ace_support {color: #9B859D}.ace-twilight .ace_fold {background-color: #AC885B;border-color: #F8F8F8}.ace-twilight .ace_support.ace_function {color: #DAD085}.ace-twilight .ace_list,.ace-twilight .ace_markup.ace_list,.ace-twilight .ace_storage {color: #F9EE98}.ace-twilight .ace_entity.ace_name.ace_function,.ace-twilight .ace_meta.ace_tag,.ace-twilight .ace_variable {color: #AC885B}.ace-twilight .ace_string {color: #8F9D6A}.ace-twilight .ace_string.ace_regexp {color: #E9C062}.ace-twilight .ace_comment {font-style: italic;color: #5F5A60}.ace-twilight .ace_variable {color: #7587A6}.ace-twilight .ace_xml-pe {color: #494949}.ace-twilight .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWMQERFpYLC1tf0PAAgOAnPnhxyiAAAAAElFTkSuQmCC) right repeat-y}
/*# sourceURL=ace/css/ace-twilight */</style></head>
    <body>
                                <div class="kk_main in_wrap">

            <header id="kk_nav" class="fixed-top kk_nav navbar narbar-static-top">
                                    <div class="navbar-header clear">
                        <button id="btn_menu" class="navbar-toggle" type="button" data-toggle="collapse" data-target="#kk_navbar">
                            <span class="sr-only">Toggle nav</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a href="https://www.joinquant.com/" title="joinQuant" class="navbar-brand  fleft "></a>
                                            </div>
                    <nav id="kk_navbar" class="kk_navbar collapse navbar-collapse " aria-expanded="false">

                        <ul class="nav navbar-nav">
                            <li><a href="https://www.joinquant.com/">首页</a></li>
                            <li class="relative"><a href="https://www.joinquant.com/algorithm/live/shareList">策略擂台<img class="icon_new" src="{{ url_for('static', filename='images/hot.png') }}" alt=""></a></li>
                            <li><a href="https://www.joinquant.com/research">投资研究</a></li>
                            <li class="active"><a href="https://www.joinquant.com/algorithm/index/list">我的策略</a></li>
                            <li><a href="https://www.joinquant.com/algorithm/trade/list">我的交易</a></li>
                            <li><a href="https://www.joinquant.com/data" target="_blank">数据</a></li>

                            <li data-step="5" data-intro="遇到问题，查看常见问题和API文档" data-position="bottom">
                                                                <a href="javascript:void(0)">帮助</a>

                                <div class="submenu" id="help-submenu">
                                    <span class="sanjiao"></span>
                                    <a href="https://www.joinquant.com/faq" class="item" target="_blank">常见问题</a>
                                    <a href="https://www.joinquant.com/api" class="item" target="_blank">API文档</a>
                                    <a href="https://www.joinquant.com/algorithm/apishare/list" class="item" target="_blank">共享函数库</a>
                                    <a href="https://www.joinquant.com/study#link=python" class="item" target="_blank">Python教程</a>
                                    <a href="https://www.joinquant.com/lectures" class="item hidden" target="_blank">教程</a>
                                    <a href="https://www.joinquant.com/post/553" class="item" target="_blank">系统更新日志</a>
                                    <a href="https://www.joinquant.com/post/4089" class="item" target="_blank">数据调整记录</a>
                                </div>
                                			                </li>
                            <li><a href="https://www.joinquant.com/study">量化课堂</a></li>
                            <li data-step="6" data-intro="查看其它小伙伴分享的策略" data-position="bottom"><a href="https://www.joinquant.com/community">社区</a></li>
                            <!--
                            <li class="navQQ">
                                <a target='_blank' href='http://qm.qq.com/cgi-bin/qm/qr?k=o2z9MjcIO2Y_rE-KlAo2x2FkZujbyaEV'>QQ<span class="mqq">群 : 429620025</span></a>
                                <div class="qqQrcode">
                					<p class="mb_0 text-center">QQ群 : <a target='_blank' href='http://qm.qq.com/cgi-bin/qm/qr?k=o2z9MjcIO2Y_rE-KlAo2x2FkZujbyaEV'>429620025</a></p>
                					<span class="sanjiao"></span><i class="img"></i>
                				</div>
                            </li>
                            -->
                                                        <div class="hidden" id="userInfoForCs" _userid="12554" _alias="时光" _mob="13263359450"></div>
                            <li class="last">
                                                                <a href="javascript:void(0)">个人账号<span class="message-badge-nav hidden">79</span></a>
                                <div class="submenu">
                                    <span class="sanjiao"></span>
                                    <a href="https://www.joinquant.com/user/account/index" class="item overdot">时光</a>                                    <a href="https://www.joinquant.com/user/msg/list" class="item">消息<span class="message-badge hidden">79</span></a>
                                    <a href="https://www.joinquant.com/user/account/setting" class="item">账号设置</a>
                                    <a href="https://www.joinquant.com/user/login/logout" class="item">退出</a>
                                </div>
                                                            </li>
                                                    </ul>
                    </nav>
                            </header>

            <!--/header-->
            <div class="kk_body  top_50">
                <div class="content content-area old-style padding_b0">
    <form name="AlgorithmModel">
        <input id="algorithmId" name="algorithm[algorithmId]" value="0f4e6227a21ef63a09148ee23b186939" algorithmid_="565583" type="hidden">
        <input name="algorithm[userId]" value="12554" type="hidden">
        <input id="accessControl" name="algorithm[accessControl]" value="0" type="hidden">
        <input id="type" name="backtest[type]" value="1" type="hidden">
    <div id="subnav" class="subnav">
        <a href="https://www.joinquant.com/algorithm/index/list" class="algo-back" title="返回策略列表">
            <i class="icon icon-chevron-left no-decoration"></i>
        </a>
        <h2 class="algo-title" title="点击修改策略名称">市盈率择时交易系统-Clone</h2>
        <input class="algo-title-box medium hidden" id="title-box" name="algorithm[name]" size="30" value="市盈率择时交易系统-Clone" style="margin-left:4px;padding:0 10px" type="text">
        <div class="state-triangle"></div>
        <div class="state-triangle border"></div>
        <div class="pull-right mode-buttons">
            <div class="mode-container">
                <div class="group-btn inline-block">
                    <div class="btn-group inline-block">
                        <a target="_blank" href="https://www.joinquant.com/algorithm/apishare/list?f=cledit" class="btn">
                            函数库
                        </a>
                    </div>
                    <div class="btn-group inline-block">
                        <a target="_blank" href="https://www.joinquant.com/api" class="btn">
                            API文档
                        </a>
                    </div>
                    <div class="btn-group inline-block toggle-buttons" id="algo-toggle-buttons">
                        <a class="btn btn-primary active no-decoration" href="#algorithm" id="algo-button">
                            编辑策略
                            <i class="icon icon-comments chat-count hidden">
                                <span class="comment-count"></span>
                            </i>
                        </a>
                        <a class="btn no-decoration" href="javascript:void(0);" id="edit-button">
                            编译运行列表
                        </a>
                        <a class="btn no-decoration" href="javascript:void(0);" id="backtest-button">
                            回测列表
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="main-pane" class="main-pane">
        <div id="algo-area" class="algorithm-area">
            <div id="ide-box" class="box ide" style="width: auto; height: 837px;">

                <div id="splitter-outer-container">
                    <div id="splitter-container" class="splitter ui-widget ui-widget-content" data-splitter-initialized="true">
                        <div id="code-area" style="height: 836px; position: absolute; left: 0px; width: 45%; border-right: 1px solid rgb(169, 169, 169);" class="splitter-pane ui-resizable">
                            <!-- toolbar start -->
                            <div class="toolbar" id="toolbar">
                                <div class="toolbar-inner">
                                    <div class="left inline-block">
                                        <div id="algo-save-button" class="btn" disabled="disabled">
                                            <span class="button-label">
                                                <span class="active-text hidden" id="save-span" title="保存策略(Ctrl+S)">
                                                    <span class="underlined_char">保  存</span>
                                                </span>
                                                <span class="busy-text" id="save-busy-text" style="display: none;">保存中</span>
                                                <span class="done-text" id="save-done-text" style="display: block;">已保存</span>
                                            </span>
                                        </div>
                                        <div id="validate-button" class="btn" data-original-title="" title="" data-step="3" data-intro="点击“编译运行”进行快速回测" data-position="right">
                                            <img src="{{ url_for('static', filename='images/loader_R.gif') }}" class="loading hidden build-loading">
                                            <span class="button-label">
                                                <span class="active-text" id="buildBtn" title="编译运行(Ctrl+Alt+B)">
                                                    <span>编译运行</span>
                                                </span>
                                                <span class="busy-text hidden build-loading" id="building">编译中...</span>
                                            </span>
                                        </div>
					                                        <div class="">
                                            <img class="loading">
                                        </div>
                                    </div>
                                    <div class="right inline-block pull-right">
                                        <div class="inline-block" style="width:20px">
                                            <a href="javascript:void(0)" id="searchBtn" title="查找">
                                                <i class="icon icon-search large-icon"></i>
                                            </a>
                                        </div>
                                        <div id="ide-options" class="btn-group inline-block">
                                            <input value="default" name="fontpref" id="font-pref-field" type="hidden">
                                            <input value="ambiance" name="themepref" id="theme-pref-field" type="hidden">
                                            <a id="prefs-menu-trigger" href="#" data-toggle="dropdown" class="btn dropdown-toggle dropdown-checked">
                                                <i class="icon icon-cog large-icon"></i>
                                                <span class="caret"></span>
                                            </a>
                                            <ul class="dropdown-menu prefs-menu pull-right">
                                                <div id="fontsize-pref" class="check-group">
                                                    <li data-fontsize="small" class="wide-left">
                                                    <a id="small-text-link" class="fontsize-pref-link">
                                                        <i class="icon icon-ok"></i>
                                                        小号字体
                                                    </a>
                                                    </li>
                                                    <li data-fontsize="default" class="wide-left checked">
                                                    <a id="normal-text-link" class="font-size-pref-link">
                                                        <i class="icon icon-ok"></i>
                                                        中号字体
                                                    </a>
                                                    </li>
                                                    <li data-fontsize="large" class="wide-left">
                                                    <a id="large-text-link">
                                                        <i class="icon icon-ok"></i>
                                                        大号字体
                                                    </a>
                                                    </li>
                                                </div>
                                                <li class="divider"></li>
                                                <div id="theme-pref" class="check-group">
                                                    <li data-theme="default" class="wide-left">
                                                    <a id="light-theme-link">
                                                        <i class="icon icon-ok"></i>
                                                        浅色背景
                                                    </a>
                                                    </li>
                                                    <li data-theme="ambiance" class="wide-left checked">
                                                    <a id="dark-theme-link">
                                                        <i class="icon icon-ok"></i>
                                                        深色背景
                                                    </a>
                                                    </li>
                                                </div>
                                                <li class="divider"></li>
                                                <div id="keybind-pref" class="check-group">
                                                    <li data-keybind="default" class="wide-left checked">
                                                    <a id="default-keybind-link">
                                                        <i class="icon icon-ok"></i>
                                                        默认
                                                    </a>
                                                    </li>
                                                    <li data-keybind="vim" class="wide-left">
                                                    <a id="vim-keybind-link">
                                                        <i class="icon icon-ok"></i>
                                                        Vim
                                                    </a>
                                                    </li>
                                                    <li data-keybind="emacs" class="wide-left">
                                                    <a id="emacs-keybind-link">
                                                        <i class="icon icon-ok"></i>
                                                        Emacs
                                                    </a>
                                                    </li>
                                                </div>
                                                <li class="divider"></li>
                                                <li class="wide-left nocheck">
                                                <a id="fullscreen-menu-link">全屏</a>
                                                </li>
                                            </ul>
                                            <a id="fullscreen-button" class="hidden btn btn-primary">
                                                退出全屏
                                            </a>
                                        </div>
                                        <!-- <button class="btn" id="keyboard" > -->
                                        <button type="button" title="快捷键" class="btn " data-toggle="modal" data-target="#myModal" style="padding:0 12px"><img src="{{ url_for('static', filename='images/keyboard.png') }}" alt="" style="width:20px;height:26px">
                                        </button>
                                        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                                                        <h4 class="modal-title" id="myModalLabel">快捷键（按 Esc 退出）</h4>
                                                    </div>
                                                    <div class="modal-body">
                                                        <ul class="pl_30">
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>F2</code></div>
                                                                <div class="inline-block modal_right">：折叠当前</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Alt-0</code> </div>
                                                                <div class="inline-block modal_right">：折叠其他</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Alt-Shift-0</code> </div>
                                                                <div class="inline-block modal_right">：展开所有</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Ctrl-/</code> </div>
                                                                <div class="inline-block modal_right">：注释</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Ctrl-[</code> </div>
                                                                <div class="inline-block modal_right">：块反缩进</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Ctrl-]</code> </div>
                                                                <div class="inline-block modal_right">：块缩进</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Ctrl-A</code></div>
                                                                <div class="inline-block modal_right">：选择全部</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Ctrl-L</code> </div>
                                                                <div class="inline-block modal_right">：跳转到</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Ctrl-F</code></div>
                                                                <div class="inline-block modal_right">：查找</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Ctrl-Alt-K</code> </div>
                                                                <div class="inline-block modal_right">：查找全部</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Alt-K</code> </div>
                                                                <div class="inline-block modal_right">：选择并查找下一个</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Alt-Shift-K</code> </div>
                                                                <div class="inline-block modal_right">：选择并查找上一个</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Ctrl-D</code> </div>
                                                                <div class="inline-block modal_right">：删除当前行</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code> Ctrl-Shift-D</code></div>
                                                                <div class="inline-block modal_right">：复制并粘贴当前行</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Ctrl-H</code></div>
                                                                <div class="inline-block modal_right">：替换</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Alt-Up</code> </div>
                                                                <div class="inline-block modal_right">：上移行</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Alt-Down</code> </div>
                                                                <div class="inline-block modal_right">：下移行</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Ctrl-Shift-Left</code> </div>
                                                                <div class="inline-block modal_right">：选择左侧单词</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Ctrl-Shift-Right</code> </div>
                                                                <div class="inline-block modal_right">：选择右侧单词</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Alt-Shift-Left</code></div>
                                                                <div class="inline-block modal_right">：选择到行起始</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Alt-Shift-Right</code></div>
                                                                <div class="inline-block modal_right">：选择到行结束</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Ctrl-Home</code></div>
                                                                <div class="inline-block modal_right">：跳转到开始</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Ctrl-End</code></div>
                                                                <div class="inline-block modal_right">：跳转到结尾</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Ctrl-Left</code> </div>
                                                                <div class="inline-block modal_right">：跳到单词左侧</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Ctrl-Right</code> </div>
                                                                <div class="inline-block modal_right">：跳到单词右侧</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Alt-Left|Home</code> </div>
                                                                <div class="inline-block modal_right">：跳转到行起始</div>
                                                            </li>
                                                            <li>
                                                                <div class="inline-block modal_left"> <code>Alt-Right|End</code></div>
                                                                <div class="inline-block modal_right">：跳转到行结束</div>
                                                            </li>

                                                        </ul>
                                                    </div>
                                                   <div class="modal-footer">
                                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                                      </div>
                                                </div>
                                            </div>
                                        </div>
                                        <input value="&gt;&gt;" class="no_show btn dropdown-toggle dropdown-checked flag" title="隐藏右侧" type="button">
                                    </div>
                                </div>
                            </div>
                            <!-- toolbar endt -->

                            <div id="code-area-internal" style="height: 800px;">
                                <div class="ide-search hidden">
                                    <div class="input-append">
                                        <input placeholder="Search code" id="ide-searchbox" type="text">
                                        <div class="add-on hide-search">
                                            <i class="icon icon-remove"></i>
                                        </div>
                                    </div>
                                </div>
                                <textarea id="code" name="algorithm[code]" value="" class="hidden" style="padding:0px;height:auto"># 克隆自聚宽文章：https://www.joinquant.com/post/125
# 标题：哎呦不错哟，无止损实时满仓的市盈率选股策略
# 作者：软猫克鲁

import numpy as np
import pandas as pd
import talib as tl

# 000001.XSHG	上证指数
# 000009.XSHG	上证380
# 000010.XSHG	上证180
# 000016.XSHG	上证50
# 000300.XSHG	沪深300
# 000905.XSHG   中证500
# 定义一个全局变量, 保存要操作的指数
userIndex = ['000905.XSHG']

# 510050.XSHG | 50ETF
# 510300.XSHG | 300ETF
# 510310.XSHG | HS300ETF
# 510330.XSHG | 华夏300
# 510500.XSHG | 500ETF
# 510510.XSHG | 广发500
tradeSecurityCode = '510500.XSHG'

stockPool = 5

# 策略参考标准
set_benchmark('000300.XSHG')
# 设置手续费，买入时万分之三，卖出时万分之三加千分之一印花税, 每笔交易最低扣5块钱
set_commission(PerTrade(buy_cost=0.0003, sell_cost=0.0013, min_cost=5))

def initialize(context):
    g.indexPEAvg = pd.DataFrame(columns=['avgPE'])

    g.stocks = []

    # 得到所有成分股票
    for itm in userIndex :
        g.stocks += get_index_stocks(itm)

    # 去重复，设置股票池
    g.stocks = list(set(g.stocks))

    # 设置查询对象
    g.q = query(
        valuation.code, valuation.pe_ratio, valuation.circulating_cap \
        , valuation.turnover_ratio, valuation.market_cap, valuation.pb_ratio
    ).filter(valuation.code.in_(g.stocks))

    set_universe(g.stocks + [tradeSecurityCode])


# 每个单位时间(如果按天回测,则每天调用一次,如果按分钟,则每分钟调用一次)调用一次
def handle_data(context, data):

    df = get_fundamentals(g.q, context.current_dt)

    # 去除负值（亏损的企业）
    df = df[df['pe_ratio'] &gt; 0].dropna()
    df = df[df['pb_ratio'] &lt;&gt; 0]
    # 求PE均值
    df['weightedPE'] = df['pe_ratio'] * df['circulating_cap']
    df['ROE'] = df['pb_ratio'] / df['pe_ratio']
    weightedAvgPE = df.weightedPE.values.sum() / df.circulating_cap.values.sum()
    avgROE = df.ROE.values.mean()

    # 选择出低于平均市盈率的股票
    df = df[df['pe_ratio'] &lt; weightedAvgPE * df['circulating_cap']]
    # 选择盈利能力中等以上的股票
    df = df[df['ROE'] &gt; avgROE]
    # 选择市值最大的股票
    df = df.sort(columns='market_cap',ascending=True)
    df = df.head(stockPool)

    # 持仓且不在目标池中的股票，卖出
    stockClear = set(context.portfolio.positions.keys()) - set(df.code.values)
    for stock in stockClear:
        order_target(stock, 0)
        # 记录这次卖出
        log.info(str(context.current_dt) + " Selling %s" % (stock))

    # 不在持仓中的股票，买入
    stockAdd = set(df.code.values) - set(context.portfolio.positions.keys())

    # 取得当前的现金
    cash = context.portfolio.cash
    if len(stockAdd) &gt; 0 :
        # 等权重买入buylist中的股票
        position_per_stk = context.portfolio.cash/len(stockAdd)
        for stock in stockAdd:
            if not data[stock].isnan() and data[stock].pre_close &gt; 0:
                amount = int(position_per_stk/data[stock].pre_close/100.0) * 100
                order(stock, +amount)
                # 记录这次买入
                log.info(str(context.current_dt) + " Buying %s" % (stock))

    g.indexPEAvg.ix[context.current_dt] = [weightedAvgPE]

    # 画出PE均值的曲线
    #record(averagePE=weightedAvgPE)

</textarea>
                                <div id="ide-container" class="ide-container ace_editor ace_dark font-default ace-twilight ace_focus" data-step="1" data-intro="使用Python语言编辑策略" data-position="right"><textarea class="ace_text-input" autocorrect="off" autocapitalize="off" spellcheck="false" style="opacity: 0; height: 20px; width: 8.43333px; left: 247.967px; top: 260px;" wrap="off"></textarea><div class="ace_gutter"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="margin-top: 0px; height: 840px; width: 50px;"><div class="ace_gutter-cell " style="height: 20px;">1</div><div class="ace_gutter-cell " style="height: 20px;">2</div><div class="ace_gutter-cell " style="height: 20px;">3</div><div class="ace_gutter-cell " style="height: 20px;">4</div><div class="ace_gutter-cell " style="height: 20px;">5</div><div class="ace_gutter-cell " style="height: 20px;">6</div><div class="ace_gutter-cell " style="height: 20px;">7</div><div class="ace_gutter-cell " style="height: 20px;">8</div><div class="ace_gutter-cell " style="height: 20px;">9</div><div class="ace_gutter-cell " style="height: 20px;">10</div><div class="ace_gutter-cell " style="height: 20px;">11</div><div class="ace_gutter-cell " style="height: 20px;">12</div><div class="ace_gutter-cell " style="height: 20px;">13</div><div class="ace_gutter-cell " style="height: 20px;">14</div><div class="ace_gutter-cell " style="height: 20px;">15</div><div class="ace_gutter-cell " style="height: 20px;">16</div><div class="ace_gutter-cell " style="height: 20px;">17</div><div class="ace_gutter-cell " style="height: 20px;">18</div><div class="ace_gutter-cell " style="height: 20px;">19</div><div class="ace_gutter-cell " style="height: 20px;">20</div><div class="ace_gutter-cell " style="height: 20px;">21</div><div class="ace_gutter-cell " style="height: 20px;">22</div><div class="ace_gutter-cell " style="height: 20px;">23</div><div class="ace_gutter-cell " style="height: 20px;">24</div><div class="ace_gutter-cell " style="height: 20px;">25</div><div class="ace_gutter-cell " style="height: 20px;">26</div><div class="ace_gutter-cell " style="height: 20px;">27</div><div class="ace_gutter-cell " style="height: 20px;">28</div><div class="ace_gutter-cell " style="height: 20px;">29</div><div class="ace_gutter-cell " style="height: 20px;">30</div><div class="ace_gutter-cell " style="height: 20px;">31</div><div class="ace_gutter-cell " style="height: 20px;">32</div><div class="ace_gutter-cell " style="height: 20px;">33<span class="ace_fold-widget ace_start ace_open" style="height: 20px;"></span></div><div class="ace_gutter-cell " style="height: 20px;">34</div><div class="ace_gutter-cell " style="height: 20px;">35</div><div class="ace_gutter-cell " style="height: 20px;">36</div><div class="ace_gutter-cell " style="height: 20px;">37</div><div class="ace_gutter-cell " style="height: 20px;">38</div><div class="ace_gutter-cell " style="height: 20px;">39<span class="ace_fold-widget ace_start ace_open" style="height: 20px;"></span></div><div class="ace_gutter-cell " style="height: 20px;">40</div><div class="ace_gutter-cell " style="height: 20px;">41</div></div><div class="ace_gutter-active-line" style="top: 260px; height: 20px;"></div></div><div class="ace_scroller" style="left: 50px; right: 17px; bottom: 0px;"><div class="ace_content" style="margin-top: 0px; width: 794px; height: 840px; margin-left: 0px;"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 678.667px; visibility: visible;"></div></div><div class="ace_layer ace_marker-layer"><div class="ace_active-line" style="height:20px;top:260px;left:0;right:0;"></div></div><div class="ace_layer ace_text-layer" style="padding: 0px 4px;"><div class="ace_line" style="height:20px"><span class="ace_comment"># <span class="ace_cjk" style="width:16.86666748046875px">克</span><span class="ace_cjk" style="width:16.86666748046875px">隆</span><span class="ace_cjk" style="width:16.86666748046875px">自</span><span class="ace_cjk" style="width:16.86666748046875px">聚</span><span class="ace_cjk" style="width:16.86666748046875px">宽</span><span class="ace_cjk" style="width:16.86666748046875px">文</span><span class="ace_cjk" style="width:16.86666748046875px">章</span><span class="ace_cjk" style="width:16.86666748046875px">：</span>https://www.joinquant.com/post/125</span></div><div class="ace_line" style="height:20px"><span class="ace_comment"># <span class="ace_cjk" style="width:16.86666748046875px">标</span><span class="ace_cjk" style="width:16.86666748046875px">题</span><span class="ace_cjk" style="width:16.86666748046875px">：</span><span class="ace_cjk" style="width:16.86666748046875px">哎</span><span class="ace_cjk" style="width:16.86666748046875px">呦</span><span class="ace_cjk" style="width:16.86666748046875px">不</span><span class="ace_cjk" style="width:16.86666748046875px">错</span><span class="ace_cjk" style="width:16.86666748046875px">哟</span><span class="ace_cjk" style="width:16.86666748046875px">，</span><span class="ace_cjk" style="width:16.86666748046875px">无</span><span class="ace_cjk" style="width:16.86666748046875px">止</span><span class="ace_cjk" style="width:16.86666748046875px">损</span><span class="ace_cjk" style="width:16.86666748046875px">实</span><span class="ace_cjk" style="width:16.86666748046875px">时</span><span class="ace_cjk" style="width:16.86666748046875px">满</span><span class="ace_cjk" style="width:16.86666748046875px">仓</span><span class="ace_cjk" style="width:16.86666748046875px">的</span><span class="ace_cjk" style="width:16.86666748046875px">市</span><span class="ace_cjk" style="width:16.86666748046875px">盈</span><span class="ace_cjk" style="width:16.86666748046875px">率</span><span class="ace_cjk" style="width:16.86666748046875px">选</span><span class="ace_cjk" style="width:16.86666748046875px">股</span><span class="ace_cjk" style="width:16.86666748046875px">策</span><span class="ace_cjk" style="width:16.86666748046875px">略</span></span></div><div class="ace_line" style="height:20px"><span class="ace_comment"># <span class="ace_cjk" style="width:16.86666748046875px">作</span><span class="ace_cjk" style="width:16.86666748046875px">者</span><span class="ace_cjk" style="width:16.86666748046875px">：</span><span class="ace_cjk" style="width:16.86666748046875px">软</span><span class="ace_cjk" style="width:16.86666748046875px">猫</span><span class="ace_cjk" style="width:16.86666748046875px">克</span><span class="ace_cjk" style="width:16.86666748046875px">鲁</span></span></div><div class="ace_line" style="height:20px"></div><div class="ace_line" style="height:20px"><span class="ace_keyword">import</span> <span class="ace_support ace_function">numpy</span> <span class="ace_keyword">as</span> <span class="ace_identifier">np</span></div><div class="ace_line" style="height:20px"><span class="ace_keyword">import</span> <span class="ace_support ace_function">pandas</span> <span class="ace_keyword">as</span> <span class="ace_identifier">pd</span></div><div class="ace_line" style="height:20px"><span class="ace_keyword">import</span> <span class="ace_support ace_function">talib</span> <span class="ace_keyword">as</span> <span class="ace_identifier">tl</span></div><div class="ace_line" style="height:20px"></div><div class="ace_line" style="height:20px"><span class="ace_comment"># 000001.XSHG   <span class="ace_cjk" style="width:16.86666748046875px">上</span><span class="ace_cjk" style="width:16.86666748046875px">证</span><span class="ace_cjk" style="width:16.86666748046875px">指</span><span class="ace_cjk" style="width:16.86666748046875px">数</span></span></div><div class="ace_line" style="height:20px"><span class="ace_comment"># 000009.XSHG   <span class="ace_cjk" style="width:16.86666748046875px">上</span><span class="ace_cjk" style="width:16.86666748046875px">证</span>380</span></div><div class="ace_line" style="height:20px"><span class="ace_comment"># 000010.XSHG   <span class="ace_cjk" style="width:16.86666748046875px">上</span><span class="ace_cjk" style="width:16.86666748046875px">证</span>180</span></div><div class="ace_line" style="height:20px"><span class="ace_comment"># 000016.XSHG   <span class="ace_cjk" style="width:16.86666748046875px">上</span><span class="ace_cjk" style="width:16.86666748046875px">证</span>50</span></div><div class="ace_line" style="height:20px"><span class="ace_comment"># 000300.XSHG   <span class="ace_cjk" style="width:16.86666748046875px">沪</span><span class="ace_cjk" style="width:16.86666748046875px">深</span>300</span></div><div class="ace_line" style="height:20px"><span class="ace_comment"># 000905.XSHG   <span class="ace_cjk" style="width:16.86666748046875px">中</span><span class="ace_cjk" style="width:16.86666748046875px">证</span>500</span></div><div class="ace_line" style="height:20px"><span class="ace_comment"># <span class="ace_cjk" style="width:16.86666748046875px">定</span><span class="ace_cjk" style="width:16.86666748046875px">义</span><span class="ace_cjk" style="width:16.86666748046875px">一</span><span class="ace_cjk" style="width:16.86666748046875px">个</span><span class="ace_cjk" style="width:16.86666748046875px">全</span><span class="ace_cjk" style="width:16.86666748046875px">局</span><span class="ace_cjk" style="width:16.86666748046875px">变</span><span class="ace_cjk" style="width:16.86666748046875px">量</span>, <span class="ace_cjk" style="width:16.86666748046875px">保</span><span class="ace_cjk" style="width:16.86666748046875px">存</span><span class="ace_cjk" style="width:16.86666748046875px">要</span><span class="ace_cjk" style="width:16.86666748046875px">操</span><span class="ace_cjk" style="width:16.86666748046875px">作</span><span class="ace_cjk" style="width:16.86666748046875px">的</span><span class="ace_cjk" style="width:16.86666748046875px">指</span><span class="ace_cjk" style="width:16.86666748046875px">数</span></span></div><div class="ace_line" style="height:20px"><span class="ace_identifier">userIndex</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">[</span><span class="ace_string">'000905.XSHG'</span><span class="ace_paren ace_rparen">]</span></div><div class="ace_line" style="height:20px"></div><div class="ace_line" style="height:20px"><span class="ace_comment"># 510050.XSHG | 50ETF </span></div><div class="ace_line" style="height:20px"><span class="ace_comment"># 510300.XSHG | 300ETF </span></div><div class="ace_line" style="height:20px"><span class="ace_comment"># 510310.XSHG | HS300ETF </span></div><div class="ace_line" style="height:20px"><span class="ace_comment"># 510330.XSHG | <span class="ace_cjk" style="width:16.86666748046875px">华</span><span class="ace_cjk" style="width:16.86666748046875px">夏</span>300 </span></div><div class="ace_line" style="height:20px"><span class="ace_comment"># 510500.XSHG | 500ETF </span></div><div class="ace_line" style="height:20px"><span class="ace_comment"># 510510.XSHG | <span class="ace_cjk" style="width:16.86666748046875px">广</span><span class="ace_cjk" style="width:16.86666748046875px">发</span>500</span></div><div class="ace_line" style="height:20px"><span class="ace_identifier">tradeSecurityCode</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">'510500.XSHG'</span></div><div class="ace_line" style="height:20px"></div><div class="ace_line" style="height:20px"><span class="ace_identifier">stockPool</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">5</span></div><div class="ace_line" style="height:20px"></div><div class="ace_line" style="height:20px"><span class="ace_comment"># <span class="ace_cjk" style="width:16.86666748046875px">策</span><span class="ace_cjk" style="width:16.86666748046875px">略</span><span class="ace_cjk" style="width:16.86666748046875px">参</span><span class="ace_cjk" style="width:16.86666748046875px">考</span><span class="ace_cjk" style="width:16.86666748046875px">标</span><span class="ace_cjk" style="width:16.86666748046875px">准</span></span></div><div class="ace_line" style="height:20px"><span class="ace_support ace_function">set_benchmark</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'000300.XSHG'</span><span class="ace_paren ace_rparen">)</span></div><div class="ace_line" style="height:20px"><span class="ace_comment"># <span class="ace_cjk" style="width:16.86666748046875px">设</span><span class="ace_cjk" style="width:16.86666748046875px">置</span><span class="ace_cjk" style="width:16.86666748046875px">手</span><span class="ace_cjk" style="width:16.86666748046875px">续</span><span class="ace_cjk" style="width:16.86666748046875px">费</span><span class="ace_cjk" style="width:16.86666748046875px">，</span><span class="ace_cjk" style="width:16.86666748046875px">买</span><span class="ace_cjk" style="width:16.86666748046875px">入</span><span class="ace_cjk" style="width:16.86666748046875px">时</span><span class="ace_cjk" style="width:16.86666748046875px">万</span><span class="ace_cjk" style="width:16.86666748046875px">分</span><span class="ace_cjk" style="width:16.86666748046875px">之</span><span class="ace_cjk" style="width:16.86666748046875px">三</span><span class="ace_cjk" style="width:16.86666748046875px">，</span><span class="ace_cjk" style="width:16.86666748046875px">卖</span><span class="ace_cjk" style="width:16.86666748046875px">出</span><span class="ace_cjk" style="width:16.86666748046875px">时</span><span class="ace_cjk" style="width:16.86666748046875px">万</span><span class="ace_cjk" style="width:16.86666748046875px">分</span><span class="ace_cjk" style="width:16.86666748046875px">之</span><span class="ace_cjk" style="width:16.86666748046875px">三</span><span class="ace_cjk" style="width:16.86666748046875px">加</span><span class="ace_cjk" style="width:16.86666748046875px">千</span><span class="ace_cjk" style="width:16.86666748046875px">分</span><span class="ace_cjk" style="width:16.86666748046875px">之</span><span class="ace_cjk" style="width:16.86666748046875px">一</span><span class="ace_cjk" style="width:16.86666748046875px">印</span><span class="ace_cjk" style="width:16.86666748046875px">花</span><span class="ace_cjk" style="width:16.86666748046875px">税</span>, <span class="ace_cjk" style="width:16.86666748046875px">每</span><span class="ace_cjk" style="width:16.86666748046875px">笔</span><span class="ace_cjk" style="width:16.86666748046875px">交</span><span class="ace_cjk" style="width:16.86666748046875px">易</span><span class="ace_cjk" style="width:16.86666748046875px">最</span><span class="ace_cjk" style="width:16.86666748046875px">低</span><span class="ace_cjk" style="width:16.86666748046875px">扣</span>5<span class="ace_cjk" style="width:16.86666748046875px">块</span><span class="ace_cjk" style="width:16.86666748046875px">钱</span></span></div><div class="ace_line" style="height:20px"><span class="ace_identifier">set_commission</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">PerTrade</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">buy_cost</span><span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">0.0003</span>, <span class="ace_identifier">sell_cost</span><span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">0.0013</span>, <span class="ace_identifier">min_cost</span><span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">5</span><span class="ace_paren ace_rparen">))</span></div><div class="ace_line" style="height:20px"></div><div class="ace_line" style="height:20px"><span class="ace_keyword">def</span> <span class="ace_support ace_function">initialize</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">context</span><span class="ace_paren ace_rparen">)</span>:</div><div class="ace_line" style="height:20px">    <span class="ace_identifier">g</span>.<span class="ace_identifier">indexPEAvg</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">pd</span>.<span class="ace_identifier">DataFrame</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">columns</span><span class="ace_keyword ace_operator">=</span><span class="ace_paren ace_lparen">[</span><span class="ace_string">'avgPE'</span><span class="ace_paren ace_rparen">])</span></div><div class="ace_line" style="height:20px">    </div><div class="ace_line" style="height:20px">    <span class="ace_identifier">g</span>.<span class="ace_identifier">stocks</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span></div><div class="ace_line" style="height:20px">    </div><div class="ace_line" style="height:20px">    <span class="ace_comment"># <span class="ace_cjk" style="width:16.86666748046875px">得</span><span class="ace_cjk" style="width:16.86666748046875px">到</span><span class="ace_cjk" style="width:16.86666748046875px">所</span><span class="ace_cjk" style="width:16.86666748046875px">有</span><span class="ace_cjk" style="width:16.86666748046875px">成</span><span class="ace_cjk" style="width:16.86666748046875px">分</span><span class="ace_cjk" style="width:16.86666748046875px">股</span><span class="ace_cjk" style="width:16.86666748046875px">票</span></span></div><div class="ace_line" style="height:20px">    <span class="ace_keyword">for</span> <span class="ace_identifier">itm</span> <span class="ace_keyword">in</span> <span class="ace_identifier">userIndex</span> :</div><div class="ace_line" style="height:20px"><span class="ace_indent-guide">    </span>    <span class="ace_identifier">g</span>.<span class="ace_identifier">stocks</span> <span class="ace_keyword ace_operator">+=</span> <span class="ace_support ace_function">get_index_stocks</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">itm</span><span class="ace_paren ace_rparen">)</span></div><div class="ace_line" style="height:20px">    </div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer"><div class="ace_cursor" style="left: 197.967px; top: 260px; width: 8.43333px; height: 20px; opacity: 0;"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="width: 22px; bottom: 0px;"><div class="ace_scrollbar-inner" style="width: 22px; height: 2060px;"></div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 22px; left: 50px; right: 17px;"><div class="ace_scrollbar-inner" style="height: 22px; width: 794px;"></div></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font-family: inherit; font-style: inherit; font-size: inherit; line-height: inherit; font-size-adjust: inherit; font-stretch: inherit; font-feature-settings: inherit; font-language-override: inherit; font-kerning: inherit; font-synthesis: inherit; font-variant: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div>
                            </div>

                            <!--
                            <div id="splitter-bar" class="splitter-bar splitter-bar-vertical ui-state-default" unselectable="on" style="-moz-user-select: none; z-index: 100; position:absolute;right:0px; height: 100%;width:5px"><a href="javascript:void(0)" accesskey="" tabindex="0"></a>
                            </div>
                            -->
                        <div class="ui-resizable-handle ui-resizable-e" style="z-index: 1000; display: block;"></div></div>
                        <div id="output-pane" style="height:100%; position:absolute;left:45%; width: 54.9%;margin-left:3px" class="splitter-pane">
                            <div class="dailybars-output height_100pct">
                                <div id="dailybars-status" class="hidden">
                                    <img class="loading-image">
                                    <span class="loading-text"></span>
                                    <div class="progress-pane">
                                        <div class="progress progress-striped active">
                                            <div style="width: 0%" id="dailybars-progressbar" class="bar"></div>
                                        </div>
                                        <span id="dailybars-progresslabel" class="progress-label"></span>
                                        <div id="cancel-daily-backtest-button" class="btn cancel-button">取 消</div>
                                    </div>
                                </div>
                                <div class="dailybars-nav" id="dailybars-nav">
                                    <div id="setting-btn-group" class="btn-group inline-block dailybars-controls form-inline" data-step="2" data-intro="设置回测的开始时间、结束时间、初始资金、回测频率" data-position="bottom">
                                        <div class="control-group">
                                            <div class="mo-control-group inline-block ">
                                                <div class="controls inline-block no_wrap">
                                                    <input value="2017-06-21" id="startTime" name="backtest[startTime]" data-default="2015-01-05" data-datetype="backtest_start_date" class="datepicker hasDatepicker" readonly="readonly">
                                                </div>
                                                <label class="inline-block margin_5l margin_5r to-label no_wrap"> 到 </label>
                                                <div class="controls inline-block no_wrap">
                                                    <input value="2017-06-21" id="endTime" name="backtest[endTime]" data-default="2015-05-31" data-datetype="backtest_end_date" class="datepicker hasDatepicker" readonly="readonly">
                                                </div>
                                                <div class="controls inline-block padding_5l capitalbase-container no_wrap" style="padding-right:5px">
                                                    <div class="input-prepend">
                                                        <span class="add-on" style="padding:0px;margin:0px">￥</span>
                                                        <input name="backtest[baseCapital]" value="100000" step="1000" min="1000" id="daily_backtest_capital_base_box" class="capitalbase" type="number">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="controls inline-block valign-top no_wrap">
                                                <input id="frequency" name="backtest[frequency]" value="day" type="hidden">
                                                <div class="btn-group bootstrap-select frequency-selector-ide show-tick" style="width: 80px;">
                                                    <button data-toggle="dropdown" class="btn dropdown-toggle selectpicker btn-default" type="button" title="Daily">
                                                        <span class="filter-option pull-left">每天</span>&nbsp;<span class="caret"></span>
                                                    </button>
                                                    <div class="dropdown-menu open">
                                                        <ul role="menu" class="dropdown-menu inner selectpicker">
                                                            <li rel="day" class="selected">
                                                                <a style="" class="" tabindex="0"><i class="icon icon-ok icon-ok check-mark"></i><span class="text">每天</span>
                                                                </a>
                                                             </li>
                                                             <li rel="minute">
                                                                 <a style="" class="" tabindex="0"><i class="icon icon-ok icon-ok check-mark"></i><span class="text">分钟</span>
                                                                </a>
                                                             </li>
                                                         </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <a id="full-backtest-button">
                                        <div id="daily-new-backtest-button" href="#join-modal" data-toggle="modal" class="btn btn-primary pull-right" data-step="4" data-intro="点击“运行回测”进行完整的回测" data-position="left">
                                            运 行 回 测
                                            <i class="icon chevron-right padding_5l"></i>
                                        </div>
                                    </a>
                                </div>
                                <div class="dailybars-results" style="height:365px" id="dailybars-results">
                                    <div id="dailybar-stats">
                                        <div class="dailybar-stat">
                                            <div class="title">策略收益</div>
                                            <div id="total_returns" class="value">--</div>
                                        </div>
                                        <div class="dailybar-stat">
                                            <div class="title">基准收益</div>
                                            <div id="benchmark_returns" class="value">--</div>
                                        </div>
                                        <div class="dailybar-stat">
                                            <div class="title">Alpha</div>
                                            <div id="alpha" class="value">--</div>
                                        </div>
                                        <div class="dailybar-stat">
                                            <div class="title">Beta</div>
                                            <div id="beta" class="value">--</div>
                                        </div>
                                        <div class="dailybar-stat">
                                            <div class="title">Sharpe</div>
                                            <div id="sharpe" class="value">--</div>
                                        </div>
                                        <div class="dailybar-stat">
                                            <div class="title">
                                                最大回撤
                                               <i class="icon icon-question-sign risk-icon  popover-right" data-toggle="popover" data-original-title="" title=""></i>
                                            </div>
                                            <div id="max_drawdown" class="value">--</div>
                                        </div>
                                    </div>
                                    <div id="dailybar-chart-outer-container">
					<div id="dailybar-watermark">
						<span>点击”编译运行"进行快速回测(Ctrl-Alt-B)</span>
						<span>或者 点击"运行回测"进行详细的回测</span>
					</div>
                                    </div>
                                </div>
                                <div class="tabbable" style="height: 428px;" id="tabbable">
                                    <div class="maxmin-button">
                                        <btn id="daily-toggle-logs-button" class="btn">
                                        更多
                                        <i class="icon icon-chevron-up"></i>
                                        </btn>
                                    </div>
                                    <ul class="nav nav-tabs" id="nav-tabs">
                                        <li class="active">
                                            <a id="daily-logs-link" href="#daily-logs-tab" data-toggle="tab">日志</a>
                                        </li>
                                        <li>
                                            <a id="daily-error-tab-link" href="#daily-errors-tab" data-toggle="tab">错误<i class="icon icon-circle tiny-icon hidden" style="color:red;vertical-align:super;"></i></a>
                                        </li>
                                    </ul>
                                    <div class="tab-content no-padding" id="tab-content" style="height: 400px;">
                                        <div id="daily-logs-tab" class="tab-pane active">
                                            <div id="daily-logs-container" class="logs-output">
                                                <div class="logs-container position-relative" id="log"><pre></pre></div>
                                                <div class="logs-footer hidden" id="logs-init">
                                                    <div class="loading-image border"></div>
                                                    <span class="message">正在加载日志...</span>
                                                </div>
                                                <div class="logs-finished hidden">
                                                    结束.
                                                </div>
                                            </div>
                                        </div>
                                        <div id="daily-errors-tab" class="tab-pane">
                                            <div id="dailybars-errors" class="error-info">
                                                <div class="error-container">
                                                    <div class="error-details" id="error-log"><pre></pre></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="modal fade">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                                            <h4 class="modal-title">Modal title</h4>
                                        </div>
                                        <div class="modal-body">
                                            <p>One fine body…</p>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                            <button type="button" class="btn btn-primary">Save changes</button>
                                        </div>
                                    </div><!-- /.modal-content -->
                                </div><!-- /.modal-dialog -->
                            </div><!-- /.modal -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </form>
</div>

            </div>
            <!--/body-->



        </div>
                        <!-- 回到顶部 联系我们 -->
                <div id="leftsead" class="hidden">
                    <ul>
                        <li id="btn">
                        <a id="top_btn">
                            <img src="{{ url_for('static', filename='images/toTop.png') }}" class="shows" width="47" height="49">
                        </a>
                        </li>
                    </ul>
                </div>

        <script>
        var g_staticHost = 'https://cdn.joinquant.com';

                var g_isMobile = false;

                var g_isLogin = true;

                var g_isWinApp= false;

        </script>
	            <script src="{{ url_for('static', filename='js/lib.js') }}"></script>
        <script src="{{ url_for('static', filename='js/setGroIO.js') }}"></script>



        <script>
        $('.dropdown-toggle').dropdown();
        $("body").delegate("a","click",function(){
            if ($(this)[0].hostname.length>0 && $(this)[0].hostname != window.location.hostname) {
                window.open($(this)[0].href);
                return false;
            }
        });

        function addUserIcon(){
            var user = {
                "4c2438ee379986919782ec5aaea31ac0":'<i class="icon icon-trophy icon-trophy-gold" title="2015年最受欢迎策略冠军"></i><img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/fire.png" alt="" title="2016年度分享达人">',
                "a9a94cbf1fbc67a98acd312753232aec":'<i class="icon icon-trophy icon-trophy-silver" title="2015年最受欢迎策略亚军"></i>',
                "179b1b0056b901e816d968d28fa8e81e":'<i class="icon icon-trophy icon-trophy-copper" title="2015年最受欢迎策略季军"></i><img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/huang.png" alt="" title="2016年度明星Quant">',
                "16fd60756833d488b18dac0554f03244":'<i class="icon icon-trophy icon-trophy-gold" title="2015年圣诞节最受欢迎策略冠军"></i>',
                "eca7f63f7c3df62982dc6e8e8b29b2ab":'<i class="icon icon-trophy icon-trophy-silver" title="2015年圣诞节最受欢迎策略亚军"></i>',
                "a4c98dec350e69891a6df83add745e26":'<i class="icon icon-trophy icon-trophy-copper" title="2015年圣诞节最受欢迎策略季军"></i>',
                "aa87bf18818ee992b8583c1330ef846d":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/fire.png" alt="" title="2016年度分享达人">',
                "0f914195a39242d21c29934566e18396":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/fire.png" alt="" title="2016年度分享达人">',
                "f405ebf43640edc10f4f7e12d954ec87":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/fire.png" alt="" title="2016年度分享达人">',
                "47ba0b58397b94aa4ac1a49cb6aa6c66":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/fire.png" alt="" title="2016年度分享达人">',
                "51fcdf0e00a2508bfb79941d668f82a1":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/fire.png" alt="" title="2016年度分享达人">',
                "48c6200451d21c4b3fe6093a39fbd9df":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/fire.png" alt="" title="2016年度分享达人">',
                "31f1ab9f679923fe3f7c9fdfc6257a10":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/fire.png" alt="" title="2016年度分享达人">',
                "9eb156885cf6b7314d8534d630dad77b":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/fire.png" alt="" title="2016年度分享达人">',
                "42c36f513d5a18b2364c6ac8e37dc03e":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/fire.png" alt="" title="2016年度分享达人">',
                "fcf44ad36423fb2cac78ea69ab510919":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/huang.png" alt="" title="2016年度明星Quant">',
                "7cc9c0254e6d756a55d208487d2196b4":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/huang.png" alt="" title="2016年度明星Quant">',
                "43735a12db3380763d253ec2ffc4b16e":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/huang.png" alt="" title="2016年度明星Quant">',
                "db948de33bc2e862b5f8f16443394c2b":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/huang.png" alt="" title="2016年度明星Quant">',
                "e3bde20a826bc82d976f0d286b3b32be":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/huang.png" alt="" title="2016年度明星Quant">',
                "86324720004bc022ef8b527c20151cbb":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/huang.png" alt="" title="2016年度明星Quant">',
                "0d815da657403ee258f228a168c30489":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/huang.png" alt="" title="2016年度明星Quant">',
                "7c94444a5f7e6513c2894f5766a027c6":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/huang.png" alt="" title="2016年度明星Quant">',
                "67240f4041bc73f9461f83d8b1bdca58":'<img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/huang.png" alt="" title="2016年度明星Quant">',
                //"00e28d92af2a53a2a4b98b775c8f6bb2":'<i class="icon icon-trophy icon-trophy-gold" title="2015年最受欢迎策略冠军"></i><img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/huang.png" alt="" title="2016年度明星Quant"><img style="position:relative;top:-1px" src="https://cdn.joinquant.com/common/img/fire.png" alt="" title="2016年度分享达人">',
            }

            $('.user-alias').each(function(){
                /*
                var alias =  $(this).html();
                if(user[alias]){
                    alias = alias+user[alias];
                    $(this).html(alias);
                }
                */
                var euid = $(this).attr('href').replace("/user/","");
                if(user[euid]){
                    var alias =  $(this).html();
                    alias = alias+user[euid];
                    $(this).html(alias);
                }
           });
        }
	</script>
        <script type="text/javascript" charset="utf-8" src="{{ url_for('static', filename='js/stockcode.js') }}"></script>
<script type="text/javascript" charset="utf-8" src="{{ url_for('static', filename='js/jquery-ui-jq.js') }}"></script>
<script type="text/javascript" charset="utf-8" src="{{ url_for('static', filename='js/ace.js') }}"></script>
<script type="text/javascript" charset="utf-8" src="{{ url_for('static', filename='js/edit.js') }}"></script><div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>
<script>
var visited = 1;
showIntro(visited);
g_isBackToTop=false;
</script>

	            <div style="display:none">
	    <!--script src="quant2/z_stat.php" language="JavaScript"></script><script src="quant2/core.php" charset="utf-8" type="text/javascript"></script><a href="http://www.cnzz.com/stat/website.php?web_id=1256107754" target="_blank" title="站长统计">站长统计</a-->
        <!-- 返回顶部 -->
        <script>
        function toTop(){
            var scrollT=$(window).scrollTop();
            if (scrollT>=200) {
                $('#leftsead').removeClass('hidden');
            }else{
                $('#leftsead').addClass('hidden');
            }
        }
        if (!g_isMobile) {
            toTop();
        }

        $(window).scroll(function(){
            if (!g_isMobile) {
                toTop();
            }
        })
        $("#top_btn").click(function(){if(scroll=="off") return;$("html,body").animate({scrollTop: 0}, 300);});
        /* var g_isBackToTop = true;
        if(g_isBackToTop){
            $('#leftsead').removeClass('hidden');
            $("#leftsead a").hover(function(){
                if($(this).prop("className")=="youhui"){
                    $(this).children("img.hides").show();
                }else{
                    $(this).children("div.hides").show();
                    $(this).children("img.shows").hide();
                    $(this).children("div.hides").animate({marginRight:'0px'},'0');
                }
            },function(){
                if($(this).prop("className")=="youhui"){
                    $(this).children("img.hides").hide();
                }else{
                    $(this).children("div.hides").animate({marginRight:'-163px'},0,function(){$(this).hide();$(this).next("img.shows").show();});
                }
            });
            $("#top_btn").click(function(){if(scroll=="off") return;$("html,body").animate({scrollTop: 0}, 300);});

            //右侧导航 - 二维码
            $(".youhui").mouseover(function(){
                    $(this).children(".2wm").show();
            })
            $(".youhui").mouseout(function(){
                    $(this).children(".2wm").hide();
            });
        }*/
        </script>
        <script>
             var img = new Image();
             var referer = "https%3A%2F%2Fwww.joinquant.com%2Falgorithm%2Findex%2Flist";
             var euid = "44d7bc3e1ab1d9776cd6796dceebd452";
             var urd = "2016_05_15";
             var logHost = '';
             var timestamp=new Date().getTime();
             img.src = logHost+'/log/p.gif?euid='+euid+"&referer="+referer+'&urd='+urd+'&_t='+timestamp;
        </script>
        <script>
        /*cnzz点击事件统计*/
        $('.track_event_click').click(function(){
            var cate = $(this).attr('_cate');
            var name = $(this).attr('_name');
             _czc.push(['_trackEvent', cate, '点击', name]);
        });
        </script>
        </div>


</body></html>