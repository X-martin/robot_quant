/*20170613091630*/

$(window).load(function(){$(".content-container").scrollTop(0)});$("#more_select").click(function(){if($(this).hasClass("un_open")){$(".more_select_box").css({display:"none"});$(this).removeClass("un_open").html("更多")}else{$(".more_select_box").css({display:"block"});$(this).addClass("un_open").html("收起")}});$(".more").click(function(){var a=$(this).attr("href");var b=$(a).width();$(".right-container-btnBox").removeClass("translate");$(a).addClass("translate");$(a).find(".rl-title-item").removeClass("active");$(a).find(".btns").removeClass("active");$(a).find(".rl-title-item").eq(0).addClass("active");$(a).find(".btns").eq(0).addClass("active");$(a).find("btn").each(function(d,c){if(!$(c).find(".after").attr("data-toggle")){$(c).append('<span class="after" data-toggle="popover" data-placement="bottom" data-content="'+$(c).attr("_title")+'"></span>')}});popover()});$(".afterSpan").on("mouseenter",function(){var c=this;var a=$(this).position().left;$(this).popover("show");var b=$(this).next(".popover").width()/2;if(a<b){$(this).next(".popover").css({left:-70,"margin-left":-a+20});$(this).next(".popover").find(".arrow").css({left:118})}$(this).siblings(".popover").on("mouseleave",function(){$(c).popover("hide")})}).on("mouseleave",function(){var a=this;setTimeout(function(){if(!$(".popover:hover").length){$(a).popover("hide")}},100)});function popover(){$(".after").popover({placement:"bottom",trigger:"manual",html:true}).on("mouseenter",function(){var c=this;var a=$(this).position().left;$(this).popover("show");var b=$(this).next(".popover").width()/2;if(a<b){$(this).next(".popover").css({left:a,"margin-left":-a+20});$(this).next(".popover").find(".arrow").css({left:a-9})}$(this).siblings(".popover").on("mouseleave",function(){$(c).popover("hide")})}).on("mouseleave",function(){var a=this;setTimeout(function(){if(!$(".popover:hover").length){$(a).popover("hide")}},100)})}$(".closee").click(function(){$(this).parents(".right-container-btnBox").removeClass("translate")});show_tr($(".shows"),"true");$(window).resize(function(){show_tr($(".shows"),"true")});function show_tr(f,a){var c=f.parent();var e=c.next(".clc-table-box");var d=e.find(".tbody").find("tr").length;var b=e.parents(".clc-container").attr("url");if(b!="market_timing"){if(d==0){e.find("thead tr").css({display:"none"})}else{e.find("thead tr").css({display:"table-row"})}}$(".clc-moren").removeClass("hidden");if(a=="true"){$(f).find("span").addClass("open");e.css({display:"block"});e.find(".more").css({display:"block"});$(f).attr("show","false")}else{$(f).find("span").removeClass("open");e.css({display:"none"});e.find(".more").css({display:"none"});e.find(".clc-moren").addClass("hidden");$(f).attr("show","true")}}$(".left").delegate(".show-btn","click",function(){var a=$(this).attr("show");show_tr($(this),a)});$(".show-span").click(function(){var b=$(this);var a=$(this).attr("show");show_tr_nx(b,a)});function show_tr_nx(e,a){var c=e.parent().next(".clc-table").find("tbody tr").length;var b=e.parent().next(".clc-table");var d=b.find("thead tr");if(a=="true"){e.find("span").addClass("open");d.css({display:"table-row"});b.css({display:"table"});e.attr("show","false")}else{e.find("span").removeClass("open");b.css({display:"none"});e.attr("show","true")}}var $rl_title_item=$(".rl-title-item");$rl_title_item.click(function(){var a=$(this).parent().next(".rl-content").find(".btns");tabs($rl_title_item,this,a)});function tabs(b,e,f){var d=$(e).attr("href");b.removeClass("active");f.removeClass("active");$(e).addClass("active");$(d).addClass("active")}$(".time").datepicker({dateFormat:"yy-mm-dd",maxDate:"-1d",changeYear:true,changeMonth:true,beforeShow:function(){setTimeout(function(){$("#ui-datepicker-div").css("z-index",100007)},100)},onSelect:function(a){var b=$(this).attr("role");$(b).html(a)}});$("#market_timing_flag").click(function(){if($(this).prop("checked")){$(this).parent(".check_box").addClass("selected").parents(".market_timing").removeClass("disable").find(".market_timing_show").addClass("show-btn")}else{show_tr($(".market_timing_show.show-btn"),"false");$(this).parent(".check_box").removeClass("selected").parents(".market_timing").addClass("disable").find(".market_timing_show").removeClass("show-btn")}});$(".right-container").delegate(".drap","click",function(){$(this).next().toggleClass("hidden");var c=$(this).find(".drap_span").offset().top;var b=$(this).find(".drap_span").offset().left;var d=$(this).parents(".btns-box").offset().top;var a=$(this).parents(".btns-box").offset().left;$(this).next(".drap_div").css({left:b-a-214,top:c-d+20})});$(".drap_div").click(function(){var a=$(this);a.animate({},"slow","linear",function(){a.toggleClass("hidden")})});$(".right-container-btnBox").click(function(){$(".drap_div").addClass("hidden")});$(".clc-container").each(function(b,a){$(a).attr("index",b+1)});var hei=0;function scrolltop(e,b,a){if(b==1){stop=hei;if(a){stop=0}$(".content-container").scrollTop(stop);hei=0}else{var c=b-1;var d=$('.clc-container[index="'+c+'"]').height()+25;hei+=d;scrolltop(e,c,false)}}$(".table").delegate("span.todo","click",function(){var m=$(this).parents(".clc-container").find(".show-btn");var a=$(this).parents(".clc-container").attr("url");var h=true;if(a=="market_timing"){h=false;a=$(this).parents(".niu_xio").attr("url")}var k=$("."+a).find(".show-span");var f=$(this).parents("tr").attr("data");var c=$(this).parents("tbody").find("tr").length-1;var g=$(this).parents("tr").find("input").eq(0).attr("role");var n=$(this).parents("tr").find("select.select").val();if(n=="qujian"||n=="qujian_ma"){var b=$(this).parents("tr").find("input").eq(1).attr("role")}var d=[];for(var e=0;e<inputArr.length;e++){if(inputArr[e].name!=g){if(b&&inputArr[e].name!=b){d.push(inputArr[e])}else{if(!b){d.push(inputArr[e])}}}}inputArr=d;d=[];var j=this;$("#"+a).find("span").each(function(r,q){var p=$(q).attr("flag");if(p=="false"&&f==$(q).parent().attr("data")){$(q).removeClass("grey").attr("flag","true");$(j).parents("tr").remove()}});if(c==0&&h){var o="false"}else{var o="true"}if(c==0){var l="false"}else{var l="true"}show_tr(m,o);show_tr_nx(k,l)});var cS=[{item:"ma",data:[{name:"短线",def:5,val:"short_timeperiod"},{name:"长线",def:10,val:"long_timeperiod"}],other:[{name:"时间长度",def:5,val:"short_timeperiod"}]},{item:"dif",data:[{name:"DIF短线",def:12,val:"fastperiod"},{name:"DIF长线",def:26,val:"slowperiod"},{name:"DEA",def:9,val:"signalperiod"}]},{item:"dea",data:[{name:"DIF短线",def:12,val:"fastperiod"},{name:"DIF长线",def:26,val:"slowperiod"},{name:"DEA",def:9,val:"signalperiod"}]},{item:"hist",data:[{name:"DIF短线",def:12,val:"fastperiod"},{name:"DIF长线",def:26,val:"slowperiod"},{name:"DEA",def:9,val:"signalperiod"}]},{item:"macd",data:[{name:"DIF短线",def:12,val:"fastperiod"},{name:"DIF长线",def:26,val:"slowperiod"},{name:"DEA",def:9,val:"signalperiod"}]},{item:"rsi",data:[{name:"时间长度",def:14,val:"timeperiod"}]},{item:"bias",data:[{name:"时间长度",def:5,val:"timeperiod"}]},{item:"cci",data:[{name:"时间长度",def:14,val:"timeperiod"}]},{item:"atr",data:[{name:"时间长度",def:14,val:"timeperiod"}]},{item:"ma_volume",data:[{name:"短线",def:5,val:"short_timeperiod"},{name:"长线",def:10,val:"long_timeperiod"}],other:[{name:"时间长度",def:5,val:"short_timeperiod"}]},{item:"ma_money",data:[{name:"短线",def:5,val:"short_timeperiod"},{name:"长线",def:10,val:"long_timeperiod"}],other:[{name:"时间长度",def:5,val:"short_timeperiod"}]},{item:"BBands_upperband",data:[{name:"时间长度",def:5,val:"timeperiod"},{name:"上线标准差系数",def:2,val:"nbdevup"},{name:"下线标准差系数",def:2,val:"nbdevdn"}]},{item:"BBands_lowerband",data:[{name:"时间长度",def:5,val:"timeperiod"},{name:"上线标准差系数",def:2,val:"nbdevup"},{name:"下线标准差系数",def:2,val:"nbdevdn"}]},{item:"bbi",data:[{name:"1均线长度",def:3,val:"timeperiod1"},{name:"2均线长度",def:6,val:"timeperiod2"},{name:"3均线长度",def:12,val:"timeperiod3"},{name:"4均线长度",def:24,val:"timeperiod4"}]},{item:"trix",data:[{name:"TRIX",def:60,val:"trix_timeperiod"},{name:"MATRIX",def:5,val:"matrix_timeperiod"}]},{item:"ema",data:[{name:"短线",def:5,val:"short_timeperiod"},{name:"长线",def:10,val:"long_timeperiod"}]},{item:"dma",data:[{name:"DMA短线",def:5,val:"fastperiod"},{name:"DMA长线",def:60,val:"slowperiod"},{name:"AMA",def:20,val:"amaperiod"}]},{item:"n_day_chg_filter",data:[{name:"N",def:5,val:"N"}]},{item:"commission",data:[{name:"买入印花税",def:0,val:"open_tax",unit:"‰"},{name:"卖出印花税",def:1,val:"close_tax",unit:"‰"},{name:"买入佣金",def:3,val:"open_commission",unit:"‱"},{name:"卖出佣金",def:3,val:"close_commission",unit:"‱"},{name:"最低佣金",def:5,val:"min_commission",unit:"元"}]}];var cSs=[];$(".table").delegate(".edit","click",function(){var c=$(this).parents(".clc-container").attr("url");if(c=="market_timing"){c=$(this).parents(".niu_xio").attr("url")}var f=$(this).parents("tr").attr("data");var j=$(this).parents("tr").attr("url");var o=$(this).parents("tr").find(".name").text();var e=$(this).attr("role");var k=$(this);var l=[];var n="";var m=$(this).parents("tr").find(".select").val();var b=false;if(m=="dayu"||m=="xiaoyu"||m=="qujian"){b=true}var d=$(this).parents("tr").attr("url");var a="";if(f=="signal"){a="-"+d}var g=tableEdit(o,f,c,l,b,a);var i=g[0].join("");var h=n+' <p class="bold f14 item-title mb_8">'+o+"参数</p>";BootstrapDialog.show({title:o+"条件选择",message:h+i,buttons:[{label:"取消",action:function(p){p.close()}},{label:"提交",action:function(q){var p=true;$(".modal-input").each(function(t,r){var s={};var w=$(r).attr("url");var u=$(r).val();if(isNaN(u)||u<0){$(r).css({borderColor:"red"});$(r).parents(".item").find(".tips").removeClass("hidden");p=false}else{$(r).css({borderColor:"#d1d3da"});$(r).parents(".item").find(".tips").addClass("hidden");p=true;$("."+w).html(u);k.addClass("flag")}});if(p){q.close()}}}]})});function tableEdit(m,f,c,k,a,b){var h=[];for(var g=0;g<cS.length;g++){if(cS[g].item==f){if(cS[g].other&&a){var d=$(".input-"+c+"-"+cS[g].item+"-"+k.length+b).html();if(!d){d=cS[g].other[0].def}var n='<div class="item mb_20"><span class="item_span mr_10">'+cS[g].other[0].name+'</span><input class="modal-input mr_5" url="input-'+c+"-"+cS[g].item+"-"+k.length+b+'" type="text" value="'+d+'"><span class="tips hidden">请输入正确数字</div>';k.push(n)}else{for(var e in cS[g].data){var l="";if(cS[g].data[e].unit){l=cS[g].data[e].unit}var d=$(".input-"+c+"-"+cS[g].item+"-"+k.length+b).html();if(!d){d=cS[g].data[e].def}var n='<div class="item mb_20"><span class="item_span mr_10">'+cS[g].data[e].name+'</span><input class="modal-input mr_5" url="input-'+c+"-"+cS[g].item+"-"+k.length+b+'" type="text" value="'+d+'"><span url="unit-'+c+"-"+cS[g].item+"-"+k.length+b+'">'+l+'</span><span class="tips hidden">请输入正确数字</div>';k.push(n)}}}}h.push(k);return h}function edit_addStr(c,h,e,a){var g=[];var l="";for(var d=0;d<cS.length;d++){if(cS[d].item==c){if(cS[d].item=="commission"){l="commission"}if(cS[d].other&&h){var k="<span data="+cS[d].other[0].val+' class="'+l+" input-"+e+"-"+cS[d].item+"-"+g.length+'">'+cS[d].other[0].def+"</span>";g.push(k)}else{for(var b in cS[d].data){var k="<span data="+cS[d].data[b].val+' class="'+l+" input-"+e+"-"+cS[d].item+"-"+g.length+'">'+cS[d].data[b].def+"</span>";g.push(k)}}}}var f=g.join(",");return f}var nulls='<span class="null"></span>';var edit='<span class="edit" data-toggle="modal" ></span>';function addString(t,a,k,q,m,b,d,j,s,f,h){var l=[];for(var r=0;r<k.length;r++){l.push('<option value="'+k[r].value+'">'+k[r].text+"</option>")}var c=l.join("");if(d=="select"){var o='<select class="'+a+'" role="'+j+"_"+s+'_select"> '+c+" </select>"}else{if(d=="N"){var o='<span  role="'+j+"_"+s+'_select">N</span>';var n="N"}else{if(d=="Null"){var o='<span class="null"></span>'}}}if(h=="true"){var h='<span class="todo"></span>'}else{var h='<span class="null"></span>'}var e=true;var g=edit_addStr(s,e,j,f);if(g){g='<span style="margin-left:3px;" class="edits-str">('+g+")</span>"}else{g=""}var p="<tr  data="+s+" url="+f+'><td class="td tleft"><span class="name">'+t+"</span>"+g+'</td><td class="td tcenter">'+o+'</td><td class="td tcenter">'+q+'</td><td class="td tcenter">'+m+'</td><td class="td tright">'+h+"</td></tr>";if(b){$(b).append(p)}return p}$(".sortCtn").on("click",".sortSpan ",function(){if($(this).hasClass("activeSort")){return}$(".activeSort").removeClass("activeSort");$(this).addClass("activeSort")});function addSortString(s,a,k,c,n,b,f,l,r,h,j){var m=[];var d="sortCard";m.push('<option value="asc">从小到大</option>');m.push('<option value="desc">从大到小</option>');var e=m.join("");var o='<select class="sortSelect" role="'+d+"_"+r+'_select"> '+e+" </select>";var j='<span class="todo"></span>';var g=true;var i=edit_addStr(r,g,parent,h);if(i){i='<span style="margin-left:3px;" class="edits-str">('+i+")</span>"}else{i=""}var q='<input class="mr_5 indecCount" type="text" value="1" style="width:80px;" role="'+l+"_"+r+'_input">';var p="<tr  data="+r+" url="+h+'><td class="td tleft"><span class="name">'+s+"</span>"+i+'</td><td class="td tcenter">'+o+'</td><td class="td tcenter">'+q+'</td><td class="td tcenter">'+n+'</td><td class="td tright">'+j+"</td></tr>";if(b){$(b).append(p)}return p}$("#profile").on("change",".indecCount",function(){if($(this).val()<0){$(this).val(0)}});function InputBetween(a,j,d,c,i,m,e,o,h,g){var b=a;if(c=="xiaoyu"||c=="xiaoyu_ma"){var b=j}if(c=="dayu"||c=="dayu_ma"){var b=d}if(!m){var m=""}var q='<input class="mr_5" type="text" value="'+d+'" style="width:50px" role="'+o+"_"+e+'_input"><span class="danwei" role="'+o+"_"+e+'_unit">'+m+'</span> - <input class="mr_5" type="text" value="'+j+'" style="width:50px" role="'+o+"_"+e+'_maxinput"><span class="danwei" role="'+o+"_"+e+'_maxunit">'+m+"</span>";var k='<input type="text" value="'+b+'" role="'+o+"_"+e+'_input" style="width:80px" >';var f='<input class="mr_5" type="text" value="'+b+'" style="width:80px;" role="'+o+"_"+e+'_input"><span class="danwei" role="'+o+"_"+e+'_unit">'+m+"</span>";var l='<span class="mr_5">N:</span><input type="text" value="'+b+'" style="width:80px;" role="'+o+"_"+e+'_input">';var p='<span class="mr_5">'+h+'</span><input class="mr_5 input-1" type="text" value="'+d+'" style="width:50px;" role="'+o+"_"+e+'_input"><span class="danwei" role="'+o+"_"+e+'_unit">'+m+'</span> <span class="mr_5">'+g+'</span><input class="mr_5 input-2"  type="text" value="'+j+'" style="width:50px;" role="'+o+"_"+e+'_maxinput"><span class="danwei" role="'+o+"_"+e+'_maxunit">'+m+"</span>";if(i=="input"){return k}else{if(i=="unit"){return f}else{if(i=="dapan"){return l}else{if(i=="dapan_nd"){return p}else{if(i=="null"){return nulls}else{return q}}}}}}(function moren(){$("#buy_setting .additive btn .btn_span").each(function(g,l){var b=$(l).text();var m="select";var n=$(l).parents(".content");var k=$(l).parents(".right-container-btnBox");var c=k.attr("id");var d=n.find(".left").find('.clc-container[url="'+c+'"]').find("tbody");var f=$(l).parent().attr("data");var a=$(l).parents(".btns").attr("url");var e="false";var j="select";var h=[{value:"False",text:"否"},{value:"True",text:"是"}];if(g==1){var h=[{value:"by_cap_mean",text:"平分可用资金"},{value:"by_amount",text:"按固定数量"},{value:"by_market_cap_percent",text:"按总市值比例"},{value:"by_circulating_market_cap_percent",text:"按流通市值比例"}]}if(g==0||g==1){addString(b,m,h,nulls,nulls,d,j,c,f,a,e);$(this).attr("flag","false").addClass("grey")}});$("#sell_setting .additive btn .btn_span").each(function(g,l){var b=$(l).text();var m="select";var n=$(l).parents(".content");var k=$(l).parents(".right-container-btnBox");var c=k.attr("id");var d=n.find(".left").find('.clc-container[url="'+c+'"]').find("tbody");var f=$(l).parent().attr("data");var a=$(l).parents(".btns").attr("url");var e="false";var j="select";var h=[{value:"False",text:"否"},{value:"True",text:"是"}];if(g==5){addString(b,m,h,nulls,nulls,d,j,c,f,a,e);$(this).attr("flag","false").addClass("grey")}});$("#risk_control .stop_check_surplus btn .btn_span").each(function(g,m){var b=$(m).text();var n="select";var o=$(m).parents(".content");var l=$(m).parents(".right-container-btnBox");var c=l.attr("id");var d=o.find(".left").find('.clc-container[url="'+c+'"]').find("tbody");var f=$(m).parent().attr("data");var a=$(m).parents(".btns").attr("url");var e="true";var k="Null";var h=nulls;var j=InputBetween(20,20,10,"","unit","%",f,c);if(g==0||g==1){addString(b,n,h,j,nulls,d,k,c,f,a,e);$(this).attr("flag","false").addClass("grey")}});$("#other_params btn .btn_span").each(function(g,m){var b=$(m).text();var n="select";var o=$(m).parents(".content");var k=$(m).parents(".right-container-btnBox");var c=k.attr("id");var d=o.find(".left").find('.clc-container[url="'+c+'"]').find("tbody");var f=$(m).parent().attr("data");var a=$(m).parents(".btns").attr("url");var e="false";var j="select";var h=nulls;if(g==0){var l=InputBetween(5,"","","","unit","只",f,c);addString(b,n,h,l,nulls,d,"Null",c,f,a,e);$(this).attr("flag","false").addClass("grey")}})})();$(".btns-box btn .btn_span").click(function(){var b=$(this).parents(".content");var q=$(this).parents(".right-container-btnBox");var u=q.attr("id");var E=$(this).text();var c="select";var j=$(this).parents(".btns").attr("url");var D=$(this).parent().attr("role");var s=[{value:"dayu",text:"大于"},{value:"xiaoyu",text:"小于"},{value:"qujian",text:"区间"}];var e=b.find(".left").find('.clc-container[url="'+u+'"]').find("tbody").eq(0);var h=b.find(".left").find(".sortTable");var l=$('.clc-container[url="'+u+'"]').find(".show-btn");var B=$(this).parent().attr("data");var i=e.find("tr").length;var n="";if(q.hasClass("market_timings")){e=b.find(".left").find('.niu_xio[url="'+u+'"]').find("tbody");l=$('.clc-container[url="market_timing"]').find(".show-btn");i=$('.clc-container[url="market_timing"]').find("tbody").find("tr").length;n=$("."+u).find(".show-span")}var o=MinOrMax(E,j);var w=o.min,z=o.max,r=o.def;var v='<span class="edit" data-toggle="modal" ></span>';var m="true";var g="select";if(u=="sortCard"){var l=$(".clc-container[url=stock_pool]").find(".show-btn")}else{var l=$('.clc-container[url="'+u+'"]').find(".show-btn")}var a=$(l).prev().find(".qualified").html();if($(this).attr("flag")=="false"||i>=a){return}$(this).attr("flag","false").addClass("grey");if(j=="hangq"){var A=nulls,t="",C="unit";if(B!="n_day_chg_filter"&&B!="ipo_days_filter"){s=[{value:"dayu",text:"大于"},{value:"xiaoyu",text:"小于"},{value:"qujian",text:"区间"},{value:"dayu_ma",text:"大于n日均值"},{value:"xiaoyu_ma",text:"小于n日均值"},{value:"qujian_ma",text:"介于n1，n2均值间"}]}if(D=="N"){var A=v,t="%"}else{if(D=="numb_day"){t="天"}else{if(D=="volume"){t="股"}else{t="元"}}}var p=InputBetween(r,z,w,"",C,t,B,u);addString(E,c,s,p,A,e,g,u,B,j,m);$(e).find(".edit").attr("role",B)}else{if(j=="finance"){var t="%",C="unit";if(D=="gub"){var t="万股"}else{if(D=="szh"){var t="亿"}else{if(D=="ratio"){var t="倍"}}}var f=InputBetween(r,z,w,"",C,t,B,u);addString(E,c,s,f,nulls,e,g,u,B,j,m)}else{if(j=="sortBox"){var t="%",C="unit";if(D=="gub"){var t="万股"}else{if(D=="szh"){var t="亿"}else{if(D=="ratio"){var t="倍"}}}var f=InputBetween(r,z,w,"",C,t,B,u);addSortString(E,c,s,f,nulls,h,g,u,B,j,m)}else{if(j=="techn"){var f=InputBetween(r,z,w,"","input","",B,u);if(D=="hybrid"){var t="";var s=[{value:"dayu",text:"大于"},{value:"xiaoyu",text:"小于"},{value:"qujian",text:"区间"},{value:"jincha",text:"金叉"},{value:"sicha",text:"死叉"},{value:"duotou",text:"多头"},{value:"kongtou",text:"空头"}];if(B=="ma"||B=="ma_money"){t="元"}else{t="股"}f=InputBetween(r,z,w,"","unit",t,B,u)}else{if(D=="hybrid_f"){var s=[{value:"jincha",text:"金叉"},{value:"sicha",text:"死叉"},{value:"duotou",text:"多头"},{value:"kongtou",text:"空头"}];var f=nulls,r=""}else{if(D=="BBI"){var s=[{value:"duotou",text:"多头"},{value:"kongtou",text:"空头"}];var f=nulls,r=""}}}addString(E,"select",s,f,v,e,"select",u,B,j,m);$(e).find(".edit").attr("role",B)}else{if(j=="additive"){if(D=="N"){var t="天",r=60,x="",g="N";var p=InputBetween(r,1,0,"","unit",t,B,u)}else{if(D=="Null"){var x="",g="Null",p=nulls}else{if(D=="fixed"){var s=[{value:"amount",text:"数量"},{value:"percent",text:"百分比"}];var t="股",r=100,g="select";var p=InputBetween(r,1,0,"","unit",t,B,u)}else{if(D=="refresh_rate"){var g="Null",t="交易日/次";var p=InputBetween(1,1,0,"","unit",t,B,u)}else{if(B=="check_stocks_refresh_rate"){var g="Null",t="交易日/次";var p=InputBetween(1,1,0,"","unit",t,B,u)}}}}}addString(E,c,s,p,nulls,e,g,u,B,j,m)}else{if(j=="stop_check_surplus"){if(D=="dapan"){var s=[{value:"NriJunXianSicha",text:"N日均线“死叉”"},{value:"NriNeiDie",text:"N日内跌幅"}],t="",r=60,w=10,z=30,g="dapan",c="select",d="select"}else{var t="%",g="unit",r=20,c="",d="Null",s=""}var p=InputBetween(r,z,w,"",g,t,B,u);addString(E,c,s,p,nulls,e,d,u,B,j,m)}else{if(j=="other"){var s=[{value:"amount",text:"数量"},{value:"value",text:"金额"}],t="股",r=100,g="unit",c="select",d="select";var p=InputBetween(r,z,w,"",g,t,B,u);addString(E,c,s,p,nulls,e,d,u,B,j,m)}else{if(j=="other_parameters"){if(B=="set_slippage"){var s=[{value:"FixedSlippage",text:"固定值"},{value:"PriceRelatedSlippage",text:"百分比"}];var r=0.02,t="元",v=nulls;var p=InputBetween(r,z,w,"","unit",t,B,u)}else{if(B=="commission"){var s=nulls,p=nulls,g="Null"}else{if(B=="use_real_price"){var s=[{value:"True",text:"开启"},{value:"False",text:"关闭"}];var p=nulls,v=nulls}else{if(B=="order_volume_ratio"||B=="security_max_proportion"){var p=InputBetween(100,z,w,"","unit","%",B,u);var v=nulls,g="Null"}}}}addString(E,c,s,p,v,e,g,u,B,j,m)}else{if(j=="form"){addString(E,"","",nulls,nulls,e,"Null",u,B,j,m)}}}}}}}}}show_tr(l,"true");$("tr").removeClass("focus");$("."+u).find('tr[data="'+B+'"]').addClass("focus");if(u=="market_timing_xio"||u=="market_timing_niu"){show_tr_nx(n,"true");u="market_timing"}if(u=="sortCard"){var k=1}else{var k=$("."+u).attr("index")}if(k==1){var y=true}else{var y=false}scrolltop(u,k,y)});$(".clc-table tbody").delegate("tr","click",function(){$("tr").removeClass("focus");$(this).addClass("focus")});var inputArr=[];$(".content").delegate("input","change",function(){var h=$(this).attr("role");var b=$(this).parents("tr").attr("url");var f=$(this).parents("tr").attr("data");var g=$(this).val();var a=$(this).parent("td").prev("td").find(".select").val();var d="false";var c={};c.name=h;c.val=g;c.select=a;inputArr.push(c);if($(this).hasClass("allows")){var e="true"}else{var e="false"}if(b=="finance"&&f!="valuation.market_cap"&&f!="valuation.circulating_market_cap"&&f!="valuation.capitalization"&&f!="valuation.circulating_cap"){d="true"}if(f=="dif"||f=="dea"||f=="hist"||f=="cci"||f=="trix"||f=="bias"||f=="n_day_chg_filter"){d="true"}inputCheck(d,g,this,e)});function inputCheck(b,e,d,c){if(e<0||e==""){var a="true"}if(b=="true"||c=="true"){var a="false"}if(isNaN(e)&&c=="false"){var a="true"}if(a=="true"){$(d).css({borderColor:"red"}).css({color:"red"}).attr("error","true")}else{$(d).css({borderColor:"#e8ecf0"}).css({color:"#00192f"}).attr("error","false")}}$(".table").delegate("select.select","change",function(){var t=$(this).val();var j=$(this).parents("tr");var u=j.find(".td").eq(0).find(".name").html();var r=j.attr("data");var c=j.attr("url");var n=$(this).parents(".clc-container").attr("url");if(n=="market_timing"){n=$(this).parents(".niu_xio").attr("url")}var s=$(this).parent("td").next();var f=MinOrMax(u,c);var o=f.min,q=f.max,k=f.def;var l=j.find(".danwei").html();var b='<span class="danwei hidden">'+l+"</span>";var d=$(this).parents("tr").find(".edits-str").find("span");var m=[];d.each(function(x,w){var A={};var y=$(w).attr("data");var z=$(w).html();A.url=y;A.def=z;m.push(A)});if(!l){var l=""}if(c=="hangq"&&r!="n_day_chg_filter"&&r!="ipo_days_filter"){if(t=="qujian_ma"||t=="dayu_ma"||t=="xiaoyu_ma"){l="天"}else{if(r=="volume"){l="股"}else{l="元"}}}if(t=="xiaoyu"||t=="dayu"){var a=InputBetween(k,q,o,t,"input","",r,n);if(l){a=InputBetween(k,q,o,t,"unit",l,r,n)}s.html(a);var e=edit_addStr(r,true,n,"");$(this).parents("tr").find(".edits-str").html("("+e+")")}else{if(t=="qujian"){var a=InputBetween(k,q,o,t,"between",l,r,n);var e=edit_addStr(r,true,n,"");s.html(a);$(this).parents("tr").find(".edits-str").html("("+e+")")}else{if(t=="by_amount"){l="股";var a=InputBetween(100,q,o,t,"unit",l,r,n);s.html(a)}else{if(t=="by_cap_mean"||t=="by_cap_percent"){l="";var a=InputBetween(k,q,o,t,"null",l,r,n);s.html(a)}else{if(t=="NriJunXianSicha"){k=60,o=10,q=20;var a=InputBetween(k,q,o,t,"dapan","",r,n);s.html(a)}else{if(t=="NriNeiDie"){k=10,o=10,q=30;var h="N：",g="跌幅：";var a=InputBetween(k,q,o,t,"dapan_nd","%",r,n,"N:","跌幅:");s.html(a);$('.danwei[role="'+n+"_"+r+'_unit"]').html("")}else{if(t=="percent"){s.find(".danwei").html("%")}else{if(t=="amount"){var a=InputBetween(100,q,o,t,"unit","股",r,n);s.html(a)}else{if(t=="value"){var a=InputBetween(10000,q,o,t,"unit","元",r,n);s.html(a)}else{if(t=="dayu_ma"||t=="xiaoyu_ma"){a=InputBetween(k,q,o,t,"unit",l,r,n);s.html("n："+a)}else{if(t=="qujian_ma"){var h="n1：",g="n2：";var a=InputBetween(k,q,o,t,"dapan_nd",l,r,n,h,g);s.html(a)}else{if(t=="FixedSlippage"){var l="元";var a=InputBetween("0.02",q,o,t,"unit",l,r,n);s.html(a)}else{if(t=="PriceRelatedSlippage"){var l="%";var a=InputBetween("0.02",q,o,t,"unit",l,r,n);s.html(a)}else{if(t=="jincha"||t=="sicha"||t=="duotou"||t=="kongtou"){var e=edit_addStr(r,false,n,"");$(this).parents("tr").find(".edits-str").html("("+e+")");s.html(nulls+b)}else{s.html(nulls+b)}}}}}}}}}}}}}}if(m.length!=0){for(var p in m){$(this).parents("tr").find('span[data="'+m[p].url+'"]').html(m[p].def)}}if(inputArr.length!=0){inputArr.forEach(function(w,x){if(t==w.select){$('input[role="'+w.name+'"]').val(w.val)}})}});function MinOrMax(d,c){var e=["MA","RSI","BIAS","CCI","N日平均成交量","N日平均成交额","布林上线","布林下线","总市值","流通市值","总股本","流通股本"];var b=$.inArray(d,e);if(b==-1){if(c=="techn"||c=="finance"){var a={min:0,max:1,def:0}}else{var a={min:10,max:20,def:10}}}if(d==e[0]){var a={min:10,max:20,def:10}}if(d==e[1]){var a={min:60,max:80,def:80}}if(d==e[2]){var a={min:0.05,max:0.1,def:0.05}}if(d==e[3]){var a={min:0,max:100,def:0}}if(d==e[4]){var a={min:500000,max:1000000,def:500000}}if(d==e[5]){var a={min:10000000,max:20000000,def:10000000}}if(d==e[6]||d==e[7]){var a={min:5,max:10,def:10}}if(d==e[8]||d==e[9]){var a={min:100,max:500,def:100}}if(d==e[10]||d==e[11]){var a={min:20000,max:30000,def:20000}}return a}function saveTemplates(){BootstrapDialog.show({title:"为您的模板取一个名字",cssClass:"save_templates_bootstrap",message:'<div class="pt_30"><input class="templates-input" type="text"></div>',buttons:[{label:"确定",cssClass:"disabled",id:"templates_name",action:function(b){var a=$(".templates-input").val()}}],onshown:function(a){$(".templates-input").blur(function(){if($(this).val()!=""){$("#templates_name").removeClass("disabled")}else{$("#templates_name").addClass("disabled")}})}})}$("#my_templates").click(function(){Cy.ajax("/algorithm/index/wizardTemplateList",{type:"GET",success:function(a){console.log(a);BootstrapDialog.show({title:"我的模板",cssClass:"my_templates_bootstrap",message:a.data.html,buttons:[{label:"删除",cssClass:"disabled delegate-btn",action:function(b){$("input[type=checkbox]:checked.checkbox").parents("tr").remove();$(".delegate-btn").addClass("disabled")}},{label:"调用",cssClass:"disabled btn-primary templates_call",action:function(b){var c=$("tbody").find('input[type="checkbox"]:checked').attr("_params");restoreWizard(c);b.close()}}],onshown:function(){$("input[type=checkbox]").click(function(){if(this.checked){$(this).parent().addClass("selected")}else{$(this).parent().removeClass("selected")}disabledOrNot()});$("#selectAll").click(function(){var b=$(".my_templates_table").find("tr");for(var c=0;c<b.length;c++){if(this.checked){$(b[c]).find(".check_box").addClass("selected")}else{$(b[c]).find(".check_box").removeClass("selected")}$(b[c]).find("input").prop("checked",this.checked)}disabledOrNot()})}})}})});function disabledOrNot(){var a=$("tbody input[type=checkbox]:checked").length;if(a>0){if(a==1){$(".templates_call").removeClass("disabled")}else{$(".templates_call").addClass("disabled")}$(".delegate-btn").removeClass("disabled")}else{$(".templates_call").addClass("disabled");$(".delegate-btn").addClass("disabled")}}var arr={};var errorArr=[];function new_build_arr(){var f=newArr($(".other_params"));var g=newArr($(".stock_pool"));var c=newArr($(".sortCard"));var b=newArr($(".buy_setting"));var a=newArr($(".sell_setting"));var h=newArr($(".risk_control"));var j=newArr($(".market_timing"));var d=$("#algorithmId").val();var k=$("#market_timing_flag").prop("checked");for(var e=0;e<g.length;e++){if(g[e].name=="check_stocks_refresh_rate"){f.push(g[e])}}arr.algorithmId=d;arr.basic=f;arr.xuangu=g;arr.xuangu_sort=c;arr.ruchang=b;arr.chuchang=a;arr.fengxiankongzhi=h;if(k){arr.dapanzeshi=j}else{delete arr.dapanzeshi}console.log(arr)}function newArr(b){var c=[];if(b.attr("url")=="stock_pool"){b.find(".moren-td").each(function(h,f){var j={};var g=$(f).find(".moren-name").attr("data");var e=$(f).find(".moren-select").val();j.name=g;j.select=e;c.push(j)})}if(b.attr("url")=="sortCard"){var d={};var a=$(".activeSort").attr("data-value");d.check_out_lists_ascending=a;c.push(d)}if(b.attr("url")=="other_params"){$(".basic").each(function(g,e){var h={};var f=$(e).attr("data");if(f=="Algorithm_cycle"){h.startTime=$(".time").eq(0).val();h.endTime=$(".time").eq(1).val()}else{if(f=="starting_cash"){h.val=$(e).val()}else{if(f=="name"){h.val=$(e).text()}else{h.select=$(e).val()}}}h.name=f;c.push(h)});if($(b).find(".commission")){$(b).find(".commission").each(function(f,e){var g={};name=$(e).attr("data");val=$(e).text();if(name=="open_tax"||name=="close_tax"){val=val/1000}if(name=="open_commission"||name=="close_commission"){val=val/10000}g.name=name;g.val=val;c.push(g)})}}if(b.attr("url")=="market_timing"){b.find(".moren-td").each(function(h,f){var j={};var g=$(f).find(".moren-name").attr("data");var e=$(f).find(".moren-select").val();var k=$(f).find(".moren-input").val();if(e){j[g]=e}if(k){j[g]=k}c.push(j)})}b.find("tbody").eq(0).find("tr").each(function(k,t){var j={};var f=b.attr("url");var e=$(t).attr("data");var g=$(t).find("input").eq(0).val();var u=$(t).find("input").eq(1).val();var s=$(t).find(".danwei").eq(0).html();var l=$(t).find(".danwei").eq(1).html();var q=$(t).find(".select").val();var p=$(t).find(".sortSelect").val();var n=$(t).parents(".niu_xio").attr("role");if(f!="stock_pool"){if(s=="%"){g=g/100}if(l=="%"){u=u/100}}if(q=="qujian"||q=="qujian_ma"){j.min_val=g;j.max_val=u}else{if(q=="NriNeiDie"){j.N=g;j.diefu=u}else{if(q=="NriJunXianSicha"){j.N=g}else{if(g&&q!="NriNeiDie"&&q!="NriJunXianSicha"){j.val=g}else{if(u){j.max_val=u}}}}}var r=[];var h=[];var m="",o="";$(t).find(".edits-str").find("span").each(function(v,i){m=$(i).attr("data");o=$(i).text();if(!$(i).hasClass("commission")){r.push(m);h.push(o)}});for(var k=0;k<r.length;k++){j[r[k]]=h[k]}j.name=e;if(p){j.select=p}if(q){j.select=q}if(n){j.niu_xio=n}if(e!="commission"){c.push(j)}});return c}function errors(){var a=[];$('input[type="text"]').each(function(c,b){if($(b).attr("error")=="true"){a.push("error")}});if(a.length!=0){BootstrapDialog.show({title:"提示",message:"参数错误，请输入正确参数！",cssClass:"tips",buttons:[{label:"确定",cssClass:"btn-primary",action:function(b){b.close()}}]});return"false"}}function new_build_ajax(d,b){var c="";var a="/algorithm/index/generate?build=1";$.ajax({type:"POST",url:a,data:b,async:false,success:function(e){c=JSON.parse(e).data.url},error:function(){BootstrapDialog.show({title:"提示",btnOKLabel:"确认",message:"生成策略失败"});return false}});if(c.length>0){return c}else{return false}}$("#build").click(function(){$(".right-container-btnBox").removeClass("translate");if(errors()=="false"){return}new_build_arr();var a=new_build_ajax("build",arr);if(a){$("#algo-backtest").removeClass("disabled").attr("href",a);window.location.href=a;$("#edit-button").removeClass("disabled");$("#backtest-button").removeClass("disabled")}});$("#new").click(function(){$(".right-container-btnBox").removeClass("translate");if(errors()=="false"){return}new_build_arr();var a=0;if(a==1){return}a=1;build(arr)});$("#save").click(function(){if(errors()=="false"){return}new_build_arr();save(arr)});function restoreWizard(m){function l(B,v,E){var D=$("#"+f);var w=$("."+f);var u="";if(v){var y=null;var A=null;for(var C in v){y=v[C];u=y.name;A=null;switch(y.name){case"name":A=$(".algo-title");A.text(y.val);$(document).attr("title",y.val);break;case"Algorithm_cycle":A=$('input[data="startTime"].time');var z=$('input[data="endTime"].time');A.val(y.startTime);z.val(y.endTime);z.change();break;case"starting_cash":A=$('input[data="starting_cash"].capital');A.val(y.val);break;case"set_benchmark":A=$('select[data="set_benchmark"].basic');A.val(y.select);break}if(g[u]){D.find("btn[data='"+u+"']").find(".btn_span").click();roleName=B+"_"+g[u];if(y.select){var t=w.find("select[role='"+roleName+"_select']");t.val(y.select);t.change()}var x=w.find("input[role='"+roleName+"_input']");if((y.select=="PriceRelatedSlippage")||(u=="order_volume_ratio")||(u=="security_max_proportion")){x.val(mulNumber(y.val,100))}else{x.val(y.val)}if(y.name=="open_tax"||y.name=="close_tax"){D.find("btn[data='commission']").find(".btn_span").click();w.find('span[data="'+y.name+'"]').text(mulNumber(y.val,1000))}else{if(y.name=="open_commission"||y.name=="close_commission"){D.find("btn[data='commission']").find(".btn_span").click();w.find('span[data="'+y.name+'"]').text(mulNumber(y.val,10000))}else{if(y.name=="min_commission"){D.find("btn[data='commission']").find(".btn_span").click()}}}x.change()}if(A){A.change()}}}}function e(B,I,x){var M="";var F="";var G=null;var J=$("#"+B);var t=$("."+B);if(I&&J){var D=null;for(var L in I){D=I[L];M=D.name;if(D.check_out_lists_ascending){$(".sortSpan[data-value="+D.check_out_lists_ascending+"]").click()}if(n[M]){var w=$(".clc-moren").find("select[role='"+n[M]+"_select']");w.val(D.select);w.change()}else{if(s[M]){if(x){if(D.niu_xio=="state1"){B="market_timing_niu"}else{B="market_timing_xio"}J=$("#"+B);F=B+"_"+s[M];hqName=B+"-"+s[M];$("#market_timing_flag").click()}else{F=B+"_"+s[M];hqName=B+"-"+s[M]}J.find("btn[data='"+M+"']").find(".btn_span").click();var w=t.find("select[role='"+F+"_select']");w.val(D.select);w.change();var v=t.find("input[role='"+F+"_input']");v.val(D.val||D.min_val);v.change();MaxInput=t.find("input[role='"+F+"_maxinput']");if(MaxInput&&D.max_val){MaxInput.val(D.max_val);MaxInput.change()}if(D.N){t.find("span.input-"+hqName+"-0").text(D.N);v.val(mulNumber(D.val||D.min_val,100));v.change();if(MaxInput&&D.max_val){MaxInput.val(mulNumber(D.max_val,100));MaxInput.change()}}}else{if(a[M]){J.find("btn[data='"+M+"']").find(".btn_span").click();F=B+"_"+a[M];var w=t.find("select[role='"+F+"_select']");w.val(D.select);w.change();var v=t.find("input[role='"+F+"_input']");v.val(D.val||D.min_val);v.change();MaxInput=t.find("input[role='"+F+"_maxinput']");if(MaxInput){MaxInput.val(D.max_val);MaxInput.change()}}else{if(k[M]){if(x){if(D.niu_xio=="state1"){B="market_timing_niu"}else{B="market_timing_xio"}J=$("#"+B);F=B+"_"+k[M];techName=B+"-"+k[M];$("#market_timing_flag").click()}else{F=B+"_"+k[M];techName=B+"-"+k[M]}J.find("btn[data='"+M+"']").find(".btn_span").click();var w=t.find("select[role='"+F+"_select']");w.val(D.select);w.change();var v=t.find("input[role='"+F+"_input']");v.val(D.val||D.min_val);v.change();MaxInput=t.find("input[role='"+F+"_maxinput']");if(MaxInput){MaxInput.val(D.max_val);MaxInput.change()}for(var H in r){var z=false;var K=[];var u=r[H];for(var A=0;A<u.length;++A){if(!D[u[A]]){K=[];break}K[A]=u[A]}if(K.length>0){for(var E=0;E<K.length;++E){t.find("span.input-"+techName+"-"+E).text(D[K[E]])}z=true}if(z){break}}}else{if(c[M]){J.find("btn[data='"+M+"']").find(".btn_span").click();F=B+"_"+c[M];if(D.select&&D.select!="N"){var w=t.find("select[role='"+F+"_select']");w.val(D.select);w.change()}var y=t.find("input[role='"+F+"_input']");if(y){y.val(D.val||D.min_val);y.change()}if(D.select=="percent"){y.val(mulNumber(D.val,100))}MaxInput=t.children("input[role='"+F+"_maxinput']");if(MaxInput&&D.max_val){MaxInput.val(D.max_val);MaxInput.change()}}else{if(q[M]){J.find("btn[data='"+M+"']").find(".btn_span").click();F=B+"_"+q[M];if(D.select){var w=t.find("select[role='"+F+"_select']");w.val(D.select);w.change()}var v=t.find("input[role='"+F+"_input']");if((M=="index_stoploss")||(M=="max_buy_style")){v.val(D.val||D.N)}else{v.val(mulNumber(D.val||D.N,100))}v.change();MaxInput=t.find("input[role='"+F+"_maxinput']");if(MaxInput&&(D.max_val||D.diefu)){MaxInput.val(mulNumber(D.max_val||D.diefu,100));MaxInput.change()}}else{if(o[M]){if(x){$("#market_timing_flag").click()}J.find("btn[data='"+M+"']").find(".btn_span").click()}else{for(var C in b){if(D[C]){var w=t.find("select[role='"+b[C]+"_select']");w.val(D[C]);w.change()}}for(var C in h){if(D[C]){var v=t.find("input[role='"+h[C]+"_input']");v.val(D[C]);v.change()}}}}}}}}}}}}if(m){$(".content-container").find("span.todo").click();var i={basic:{id:"other_params",func:l,nx:false},xuangu:{id:"stock_pool",func:e,nx:false},xuangu_sort:{id:"sortCard",func:e,nx:false},dapanzeshi:{id:"market_timing",func:e,nx:true},ruchang:{id:"buy_setting",func:e,nx:false},chuchang:{id:"sell_setting",func:e,nx:false},fengxiankongzhi:{id:"risk_control",func:e,nx:false}};var n={security_universe:"security_universe",filter_st:"filter_st",filter_paused:"filter_paused",filter_delisted:"filter_delisted"};var b={set_index:"set_index",Initialize_state:"Initialize_state"};var h={index_num_state1:"index_num_state1",index_num_state2:"index_num_state2"};var s={open:"open",close:"close",high:"high",low:"low",volume:"volume",money:"money",avg:"avg",n_day_chg_filter:"n_day_chg_filter",ipo_days_filter:"ipo_days_filter"};var a={"indicator.inc_revenue_year_on_year":"indicator.inc_revenue_year_on_year","indicator.inc_revenue_annual":"indicator.inc_revenue_annual","indicator.inc_net_profit_year_on_year":"indicator.inc_net_profit_year_on_year","indicator.inc_net_profit_annual":"indicator.inc_net_profit_annual","indicator.operation_profit_to_total_revenue":"indicator.operation_profit_to_total_revenue","indicator.net_profit_margin":"indicator.net_profit_margin","indicator.gross_profit_margin":"indicator.gross_profit_margin","valuation.market_cap":"valuation.market_cap","valuation.circulating_market_cap":"valuation.circulating_market_cap","valuation.capitalization":"valuation.capitalization","valuation.circulating_cap":"valuation.circulating_cap","valuation.pe_ratio":"valuation.pe_ratio","valuation.pe_ratio_lyr":"valuation.pe_ratio_lyr","valuation.pcf_ratio":"valuation.pcf_ratio","valuation.ps_ratio":"valuation.ps_ratio","valuation.pb_ratio":"valuation.pb_ratio","indicator.roe":"indicator.roe","indicator.roa":"indicator.roa"};var k={ma:"ma",dif:"dif",dea:"dea",hist:"hist",macd:"macd",rsi:"rsi",bias:"bias",bbi:"bbi",cci:"cci",atr:"atr",trix:"trix",ema:"ema",dma:"dma",BBands_upperband:"BBands_upperband",BBands_lowerband:"BBands_lowerband",ma_money:"ma_money",ma_volume:"ma_volume"};var r={0:["short_timeperiod","long_timeperiod"],1:["fastperiod","slowperiod","signalperiod"],2:["timeperiod","nbdevup","nbdevdn"],3:["timeperiod1","timeperiod2","timeperiod3","timeperiod4"],4:["trix_timeperiod","matrix_timeperiod"],5:["fastperiod","slowperiod","amaperiod"],6:["timeperiod"],7:["short_timeperiod"]};var o={CDL3WHITESOLDIERS:"CDL3WHITESOLDIERS",CDLHAMMER:"CDLHAMMER",CDLINVERTEDHAMMER:"CDLINVERTEDHAMMER",CDL2CROWS:"CDL2CROWS",CDL3BLACKCROWS:"CDL3BLACKCROWS",CDLMORNINGSTAR:"CDLMORNINGSTAR",CDLEVENINGSTAR:"CDLEVENINGSTAR",CDLDARKCLOUDCOVER:"CDLDARKCLOUDCOVER",CDLSHOOTINGSTAR:"CDLSHOOTINGSTAR"};var c={filter_holded:"filter_holded",order_style_str:"order_style_str",filter_n_tradeday_not_buy:"filter_n_tradeday_not_buy",buy_refresh_rate:"buy_refresh_rate",buy_refresh_rat_e:"buy_refresh_rat_e",limit_filter:"limit_filter",per_limit_filter:"per_limit_filter",not_sell_in_n_days:"not_sell_in_n_days",max_hold_days:"max_hold_days",sell_by_style:"sell_by_style",sell_will_buy:"sell_will_buy",sell_refresh_rate:"sell_refresh_rate",check_stocks_refresh_rate:"check_stocks_refresh_rate"};var q={index_stoploss:"index_stoploss",security_stoploss:"security_stoploss",security_stopprofit:"security_stopprofit",portfolio_stopprofit:"portfolio_stopprofit",portfolio_stoploss:"portfolio_stoploss",portfolio_max_stoploss:"portfolio_max_stoploss",portfolio_max_stopprofit:"portfolio_max_stopprofit",max_buy_style:"max_buy_style"};var g={max_hold_stocknum:"max_hold_stocknum",set_slippage:"set_slippage",open_commission:"open_commission",close_commission:"close_commission",min_commission:"min_commission",open_tax:"open_tax",close_tax:"close_tax",use_real_price:"use_real_price",order_volume_ratio:"order_volume_ratio",security_max_proportion:"security_max_proportion"};var f="";var p=m;var d=false;for(var j in p){if(i[j]){f=i[j]["id"];func=i[j]["func"];d=i[j]["nx"];func(f,p[j],d)}}}}function addNumber(h,g){var l,k,j;try{l=h.toString().split(".")[1].length}catch(i){l=0}try{k=g.toString().split(".")[1].length}catch(i){k=0}return j=Math.pow(10,Math.max(l,k)),(mul(h,j)+mul(g,j))/j}function subNumber(h,g){var l,k,j;try{l=h.toString().split(".")[1].length}catch(i){l=0}try{k=g.toString().split(".")[1].length}catch(i){k=0}return j=Math.pow(10,Math.max(l,k)),(mul(h,j)-mul(g,j))/j}function mulNumber(h,g){var l=0,k=h.toString(),j=g.toString();try{l+=k.split(".")[1].length}catch(i){}try{l+=j.split(".")[1].length}catch(i){}return Number(k.replace(".",""))*Number(j.replace(".",""))/Math.pow(10,l)}function divNumber(i,h){var n,m,l=0,k=0;try{l=i.toString().split(".")[1].length}catch(j){}try{k=h.toString().split(".")[1].length}catch(j){}return n=Number(i.toString().replace(".","")),m=Number(h.toString().replace(".","")),mul(n/m,Math.pow(10,k-l))};